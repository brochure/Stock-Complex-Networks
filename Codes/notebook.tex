
% Default to the notebook output style

    


% Inherit from the specified cell style.




    
\documentclass[11pt]{article}

    
    
    \usepackage[T1]{fontenc}
    % Nicer default font (+ math font) than Computer Modern for most use cases
    \usepackage{mathpazo}

    % Basic figure setup, for now with no caption control since it's done
    % automatically by Pandoc (which extracts ![](path) syntax from Markdown).
    \usepackage{graphicx}
    % We will generate all images so they have a width \maxwidth. This means
    % that they will get their normal width if they fit onto the page, but
    % are scaled down if they would overflow the margins.
    \makeatletter
    \def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth
    \else\Gin@nat@width\fi}
    \makeatother
    \let\Oldincludegraphics\includegraphics
    % Set max figure width to be 80% of text width, for now hardcoded.
    \renewcommand{\includegraphics}[1]{\Oldincludegraphics[width=.8\maxwidth]{#1}}
    % Ensure that by default, figures have no caption (until we provide a
    % proper Figure object with a Caption API and a way to capture that
    % in the conversion process - todo).
    \usepackage{caption}
    \DeclareCaptionLabelFormat{nolabel}{}
    \captionsetup{labelformat=nolabel}

    \usepackage{adjustbox} % Used to constrain images to a maximum size 
    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{enumerate} % Needed for markdown enumerations to work
    \usepackage{geometry} % Used to adjust the document margins
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{textcomp} % defines textquotesingle
    % Hack from http://tex.stackexchange.com/a/47451/13684:
    \AtBeginDocument{%
        \def\PYZsq{\textquotesingle}% Upright quotes in Pygmentized code
    }
    \usepackage{upquote} % Upright quotes for verbatim code
    \usepackage{eurosym} % defines \euro
    \usepackage[mathletters]{ucs} % Extended unicode (utf-8) support
    \usepackage[utf8x]{inputenc} % Allow utf-8 characters in the tex document
    \usepackage{fancyvrb} % verbatim replacement that allows latex
    \usepackage{grffile} % extends the file name processing of package graphics 
                         % to support a larger range 
    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    

    
    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}
    
    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    
    
    % Define a nice break command that doesn't care if a line doesn't already
    % exist.
    \def\br{\hspace*{\fill} \\* }
    % Math Jax compatability definitions
    \def\gt{>}
    \def\lt{<}
    % Document parameters
    \title{network\_topology\_analysis}
    
    
    

    % Pygments definitions
    
\makeatletter
\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
    \let\PY@ul=\relax \let\PY@tc=\relax%
    \let\PY@bc=\relax \let\PY@ff=\relax}
\def\PY@tok#1{\csname PY@tok@#1\endcsname}
\def\PY@toks#1+{\ifx\relax#1\empty\else%
    \PY@tok{#1}\expandafter\PY@toks\fi}
\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
    \PY@it{\PY@bf{\PY@ff{#1}}}}}}}
\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

\expandafter\def\csname PY@tok@w\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
\expandafter\def\csname PY@tok@c\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.74,0.48,0.00}{##1}}}
\expandafter\def\csname PY@tok@k\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
\expandafter\def\csname PY@tok@o\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ow\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@nb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@nn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@ne\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.82,0.25,0.23}{##1}}}
\expandafter\def\csname PY@tok@nv\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@no\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@nl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@ni\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.60,0.60,0.60}{##1}}}
\expandafter\def\csname PY@tok@na\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.49,0.56,0.16}{##1}}}
\expandafter\def\csname PY@tok@nt\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@nd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
\expandafter\def\csname PY@tok@s\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sd\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@si\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@se\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.13}{##1}}}
\expandafter\def\csname PY@tok@sr\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.40,0.53}{##1}}}
\expandafter\def\csname PY@tok@ss\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sx\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@m\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@gh\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gu\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@gd\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@gi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.63,0.00}{##1}}}
\expandafter\def\csname PY@tok@gr\endcsname{\def\PY@tc##1{\textcolor[rgb]{1.00,0.00,0.00}{##1}}}
\expandafter\def\csname PY@tok@ge\endcsname{\let\PY@it=\textit}
\expandafter\def\csname PY@tok@gs\endcsname{\let\PY@bf=\textbf}
\expandafter\def\csname PY@tok@gp\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
\expandafter\def\csname PY@tok@go\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.53,0.53,0.53}{##1}}}
\expandafter\def\csname PY@tok@gt\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
\expandafter\def\csname PY@tok@err\endcsname{\def\PY@bc##1{\setlength{\fboxsep}{0pt}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}
\expandafter\def\csname PY@tok@kc\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kd\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kn\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@kr\endcsname{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@bp\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
\expandafter\def\csname PY@tok@fm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
\expandafter\def\csname PY@tok@vc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vg\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@vm\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
\expandafter\def\csname PY@tok@sa\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sc\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@dl\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s2\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@sh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@s1\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
\expandafter\def\csname PY@tok@mb\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mf\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mh\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mi\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@il\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@mo\endcsname{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
\expandafter\def\csname PY@tok@ch\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cm\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cpf\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@c1\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}
\expandafter\def\csname PY@tok@cs\endcsname{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.25,0.50,0.50}{##1}}}

\def\PYZbs{\char`\\}
\def\PYZus{\char`\_}
\def\PYZob{\char`\{}
\def\PYZcb{\char`\}}
\def\PYZca{\char`\^}
\def\PYZam{\char`\&}
\def\PYZlt{\char`\<}
\def\PYZgt{\char`\>}
\def\PYZsh{\char`\#}
\def\PYZpc{\char`\%}
\def\PYZdl{\char`\$}
\def\PYZhy{\char`\-}
\def\PYZsq{\char`\'}
\def\PYZdq{\char`\"}
\def\PYZti{\char`\~}
% for compatibility with earlier versions
\def\PYZat{@}
\def\PYZlb{[}
\def\PYZrb{]}
\makeatother


    % Exact colors from NB
    \definecolor{incolor}{rgb}{0.0, 0.0, 0.5}
    \definecolor{outcolor}{rgb}{0.545, 0.0, 0.0}



    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy 
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    % Slightly bigger margins than the latex defaults
    
    \geometry{verbose,tmargin=1in,bmargin=1in,lmargin=1in,rmargin=1in}
    
    

    \begin{document}
    
    
    \maketitle
    
    

    
    \hypertarget{networks-construction-topology-analysis}{%
\section{Networks Construction \& Topology
Analysis}\label{networks-construction-topology-analysis}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}1}]:} \PY{k+kn}{from} \PY{n+nn}{\PYZus{}\PYZus{}future\PYZus{}\PYZus{}} \PY{k}{import} \PY{n}{division}
        \PY{k+kn}{import} \PY{n+nn}{logging}
        \PY{k+kn}{import} \PY{n+nn}{logging}\PY{n+nn}{.}\PY{n+nn}{config}
        \PY{k+kn}{import} \PY{n+nn}{sys}\PY{o}{,} \PY{n+nn}{csv}\PY{o}{,} \PY{n+nn}{time}\PY{o}{,} \PY{n+nn}{requests}\PY{o}{,} \PY{n+nn}{statsmodels}\PY{o}{,} \PY{n+nn}{math}
        \PY{k+kn}{from} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{tsa}\PY{n+nn}{.}\PY{n+nn}{stattools} \PY{k}{import} \PY{n}{coint}\PY{p}{,} \PY{n}{adfuller}\PY{p}{,} \PY{n}{grangercausalitytests}
        \PY{k+kn}{import} \PY{n+nn}{statsmodels}\PY{n+nn}{.}\PY{n+nn}{api} \PY{k}{as} \PY{n+nn}{sm}
        \PY{k+kn}{from} \PY{n+nn}{scipy} \PY{k}{import} \PY{n}{stats}
        \PY{k+kn}{import} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{special}
        \PY{k+kn}{from} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{import} \PY{n}{describe}
        \PY{k+kn}{from} \PY{n+nn}{contextlib} \PY{k}{import} \PY{n}{contextmanager}
        \PY{k+kn}{from} \PY{n+nn}{datetime} \PY{k}{import} \PY{n}{datetime}\PY{p}{,} \PY{n}{timedelta}
        \PY{k+kn}{from} \PY{n+nn}{dateutil}\PY{n+nn}{.}\PY{n+nn}{parser} \PY{k}{import} \PY{n}{parse}
        \PY{k+kn}{import} \PY{n+nn}{scipy}\PY{n+nn}{.}\PY{n+nn}{stats} \PY{k}{as} \PY{n+nn}{ss}
        \PY{k+kn}{import} \PY{n+nn}{seaborn} \PY{k}{as} \PY{n+nn}{sns}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
        \PY{k+kn}{import} \PY{n+nn}{matplotlib} \PY{k}{as} \PY{n+nn}{mpl}
        \PY{k+kn}{import} \PY{n+nn}{networkx} \PY{k}{as} \PY{n+nn}{nx}
        \PY{k+kn}{from} \PY{n+nn}{networkx}\PY{n+nn}{.}\PY{n+nn}{algorithms} \PY{k}{import} \PY{n}{community}
        \PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
        \PY{k+kn}{import} \PY{n+nn}{numpy} \PY{k}{as} \PY{n+nn}{np}
        \PY{k+kn}{from} \PY{n+nn}{core} \PY{k}{import} \PY{n}{SendEmail}\PY{p}{,} \PY{n}{ROOTPATH}\PY{p}{,} \PY{n}{sri\PYZus{}SP500\PYZus{}log\PYZus{}return}
        \PY{k+kn}{from} \PY{n+nn}{preprocess\PYZus{}stocks} \PY{k}{import} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{,} \PY{n}{LENTCKR}\PY{p}{,} \PY{n}{LENTRGL}\PY{p}{,} \PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{p}{,} \PY{n}{DICT\PYZus{}STP}\PY{p}{,} \PY{n}{getIndustryCodeByStockCode}
\end{Verbatim}


    \hypertarget{basic-information}{%
\subsection{1. Basic information}\label{basic-information}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}2}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of stocks: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{LENTCKR}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of named industries: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{len}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of BEA industries: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{len}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BEA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of NAICS industries: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{len}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{NAICS}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Number of stocks: 1418
Number of named industries: 55
Number of BEA industries: 56
Number of NAICS industries: 199

    \end{Verbatim}

    \hypertarget{count-of-stocks-by-industry-category}{%
\subparagraph{Count of stocks by industry
category}\label{count-of-stocks-by-industry-category}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}3}]:} \PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}3}]:} Computer and electronic products                                        326
        Federal Reserve banks, credit intermediation, and related activities    271
        Chemical products                                                       241
        Funds, trusts, and other financial vehicles                             166
        Insurance carriers and related activities                               122
        Fabricated metal products                                                85
        Utilities                                                                83
        Food and beverage and tobacco products                                   81
        Oil and gas extraction                                                   77
        Broadcasting and telecommunications                                      69
        Machinery                                                                59
        Computer systems design and related services                             54
        Other retail                                                             51
        Securities, commodity contracts, and investments                         50
        Wholesale trade                                                          48
        Miscellaneous professional, scientific, and technical services           45
        Motor vehicles, bodies and trailers, and parts                           43
        Performing arts, spectator sports, museums, and related activities       40
        Data processing, internet publishing, and other information services     35
        Construction                                                             34
        Support activities for mining                                            28
        Petroleum and coal products                                              26
        Paper products                                                           24
        Rental and leasing services and lessors of intangible assets             22
        Ambulatory health care services                                          20
        Air transportation                                                       20
        Accommodation                                                            19
        Administrative and support services                                      16
        Publishing industries, except internet (includes software)               16
        Water transportation                                                     14
        Truck transportation                                                     14
        Transit and ground passenger transportation                              14
        Plastics and rubber products                                             12
        Other transportation and support activities                              11
        Miscellaneous manufacturing                                              10
        Other transportation equipment                                           10
        Other real estate                                                         9
        Textile mills and textile product mills                                   9
        Primary metals                                                            7
        Electrical equipment, appliances, and components                          7
        Furniture and related products                                            7
        Hospitals                                                                 6
        Nonmetallic mineral products                                              6
        Waste management and remediation services                                 5
        Rail transportation                                                       5
        Pipeline transportation                                                   5
        Motion picture and sound recording industries                             4
        Nursing and residential care facilities                                   3
        Apparel and leather and allied products                                   3
        Mining, except oil and gas                                                3
        Wood products                                                             3
        Printing and related support activities                                   3
        Other services, except government                                         1
        Social assistance                                                         1
        Legal services                                                            1
        Name: Title, dtype: int64
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}220}]:} \PY{k}{def} \PY{n+nf}{genEIODirectMatrix}\PY{p}{(}\PY{n}{directType}\PY{p}{)}\PY{p}{:}
              \PY{n}{EIO\PYZus{}direct\PYZus{}matrix} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{matrix}\PY{p}{(}
                  \PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}
                      \PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{p}{)}\PY{p}{,}
                       \PY{n+nb}{len}\PY{p}{(}\PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{p}{)}\PY{p}{)}\PY{p}{,}
                      \PY{n}{dtype}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{float64}
                  \PY{p}{)}\PY{p}{)}
              \PY{k}{if} \PY{n}{directType} \PY{o+ow}{is} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{requirements}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                  \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                      \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                          \PY{k}{if} \PY{n}{EIO\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                              \PY{n}{EIO\PYZus{}direct\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{float64}\PY{p}{(}\PY{n}{EIO\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}\PY{p}{)} \PY{o}{/} \PY{n}{EIO\PYZus{}matrix}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{j}\PY{p}{]}
              \PY{k}{elif} \PY{n}{directType} \PY{o+ow}{is} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{demands}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:}
                  \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                      \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                          \PY{k}{if} \PY{n}{EIO\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                              \PY{n}{EIO\PYZus{}direct\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{float64}\PY{p}{(}\PY{n}{EIO\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}\PY{p}{)} \PY{o}{/} \PY{n}{EIO\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
              \PY{k}{else}\PY{p}{:} \PY{k}{return} \PY{k+kc}{None}
              \PY{k}{return} \PY{n}{EIO\PYZus{}direct\PYZus{}matrix}
          
          \PY{k}{def} \PY{n+nf}{getAllMatrixContent}\PY{p}{(}\PY{n}{mat}\PY{p}{)}\PY{p}{:}
              \PY{n}{arr} \PY{o}{=} \PY{p}{[}\PY{p}{]}
              \PY{k}{for} \PY{n}{m} \PY{o+ow}{in} \PY{n}{mat}\PY{p}{:}
                  \PY{n}{arr} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{arr}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{m}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
              \PY{k}{return} \PY{n}{arr}
          
          \PY{k}{def} \PY{n+nf}{getNonzeroMatrixContent}\PY{p}{(}\PY{n}{mat}\PY{p}{)}\PY{p}{:}
              \PY{n}{arr} \PY{o}{=} \PY{p}{[}\PY{p}{]}
              \PY{k}{for} \PY{n}{m} \PY{o+ow}{in} \PY{n}{mat}\PY{p}{:}
                  \PY{n}{ar\PYZus{}m} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{m}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
                  \PY{n}{ar\PYZus{}m} \PY{o}{=} \PY{n}{ar\PYZus{}m}\PY{p}{[}\PY{n}{ar\PYZus{}m}\PY{o}{!=}\PY{l+m+mi}{0}\PY{p}{]}
                  \PY{n}{arr} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{arr}\PY{p}{,} \PY{n}{ar\PYZus{}m}\PY{p}{)}
              \PY{k}{return} \PY{n}{arr}
          
          \PY{k}{def} \PY{n+nf}{genEdgeDensity}\PY{p}{(}\PY{n}{lst}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{100}\PY{p}{)}\PY{p}{:}
              \PY{n}{theta\PYZus{}thresholds} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linspace}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{floor}\PY{p}{(}\PY{n+nb}{min}\PY{p}{(}\PY{n}{lst}\PY{p}{)}\PY{o}{*}\PY{l+m+mf}{10.0}\PY{p}{)}\PY{o}{/}\PY{l+m+mf}{10.0}\PY{p}{,} \PY{n}{np}\PY{o}{.}\PY{n}{ceil}\PY{p}{(}\PY{n+nb}{max}\PY{p}{(}\PY{n}{lst}\PY{p}{)}\PY{o}{*}\PY{l+m+mf}{10.0}\PY{p}{)}\PY{o}{/}\PY{l+m+mf}{10.0}\PY{p}{,} \PY{n}{bins}\PY{p}{)}
              \PY{n}{edge\PYZus{}densities} \PY{o}{=} \PY{p}{[}\PY{p}{]}
              \PY{n}{n} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{n}{LENLST\PYZus{}FLOAT} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{float}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{lst}\PY{p}{)}\PY{p}{)}
              \PY{k}{for} \PY{n}{theta} \PY{o+ow}{in} \PY{n}{theta\PYZus{}thresholds}\PY{p}{:}
                  \PY{n}{n} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                  \PY{n+nb}{print}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  \PY{n}{edge\PYZus{}densities}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{corr} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{theta} \PY{k}{for} \PY{n}{corr} \PY{o+ow}{in} \PY{n}{lst}\PY{p}{)}\PY{o}{/}\PY{n}{LENLST\PYZus{}FLOAT}\PY{p}{)}
              \PY{k}{return} \PY{n}{theta\PYZus{}thresholds}\PY{p}{,} \PY{n}{edge\PYZus{}densities}
          
          \PY{k}{def} \PY{n+nf}{logarise}\PY{p}{(}\PY{n}{n}\PY{p}{)}\PY{p}{:}
              \PY{k}{if} \PY{n}{n} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:} \PY{k}{return} \PY{l+m+mf}{0.0}
              \PY{k}{return} \PY{o}{\PYZhy{}}\PY{l+m+mf}{1.0}\PY{o}{/}\PY{n}{np}\PY{o}{.}\PY{n}{log10}\PY{p}{(}\PY{n}{n}\PY{p}{)}
          
          \PY{k}{def} \PY{n+nf}{combineThresholds}\PY{p}{(}\PY{n}{thresholds\PYZus{}1}\PY{p}{,} \PY{n}{thresholds\PYZus{}2}\PY{p}{,} \PY{n}{mat\PYZus{}1}\PY{p}{,} \PY{n}{mat\PYZus{}2}\PY{p}{)}\PY{p}{:}
              \PY{n}{LENMAT} \PY{o}{=} \PY{n}{mat\PYZus{}1}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
              \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}
                  \PY{n}{index}\PY{o}{=}\PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{thresholds\PYZus{}1}\PY{p}{)}\PY{o}{*}\PY{n+nb}{len}\PY{p}{(}\PY{n}{thresholds\PYZus{}2}\PY{p}{)}\PY{p}{)}\PY{p}{,}
                  \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{theta\PYZus{}DR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{theta\PYZus{}DD}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{no\PYZus{}directions}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
              \PY{n}{idx} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{n+nb}{print}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{thresholds\PYZus{}1}\PY{p}{)}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
              \PY{k}{for} \PY{n}{t1} \PY{o+ow}{in} \PY{n}{thresholds\PYZus{}1}\PY{p}{:}
                  \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{.}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  \PY{n}{exceeded} \PY{o}{=} \PY{k+kc}{False}
                  \PY{k}{for} \PY{n}{t2} \PY{o+ow}{in} \PY{n}{thresholds\PYZus{}2}\PY{p}{:}
                      \PY{n}{cnt} \PY{o}{=} \PY{l+m+mi}{0}
                      \PY{k}{if} \PY{o+ow}{not} \PY{n}{exceeded}\PY{p}{:}
                          \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{LENMAT}\PY{p}{)}\PY{p}{:}
                              \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{LENMAT}\PY{p}{)}\PY{p}{:}
                                  \PY{n}{a} \PY{o}{=} \PY{n}{mat\PYZus{}1}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}
                                  \PY{n}{b} \PY{o}{=} \PY{n}{mat\PYZus{}2}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}
                                  \PY{k}{if} \PY{p}{(}\PY{n}{a} \PY{o}{\PYZgt{}} \PY{l+m+mf}{0.0} \PY{o+ow}{and} \PY{n}{logarise}\PY{p}{(}\PY{n}{a}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{t1}\PY{p}{)} \PY{o+ow}{or} \PY{p}{(}\PY{n}{b} \PY{o}{\PYZgt{}} \PY{l+m+mf}{0.0} \PY{o+ow}{and} \PY{n}{logarise}\PY{p}{(}\PY{n}{b}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{t2}\PY{p}{)}\PY{p}{:}
                                      \PY{n}{cnt} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                          \PY{k}{if} \PY{n}{cnt} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:} \PY{n}{exceeded} \PY{o}{=} \PY{k+kc}{True}
                      \PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{idx}\PY{p}{,}\PY{p}{:}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{t1}\PY{p}{,} \PY{n}{t2}\PY{p}{,} \PY{n}{cnt}\PY{p}{]}
                      \PY{n}{idx} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
              \PY{k}{return} \PY{n}{df}
          
          \PY{k}{def} \PY{n+nf}{combineThresholdsOfEIOAndCorr}\PY{p}{(}\PY{n}{thresholds\PYZus{}eio}\PY{p}{,} \PY{n}{thresholds\PYZus{}corr}\PY{p}{,} \PY{n}{UG}\PY{p}{)}\PY{p}{:}
              \PY{k}{global} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}
              \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}
                  \PY{n}{index}\PY{o}{=}\PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{thresholds\PYZus{}eio}\PY{p}{)}\PY{o}{*}\PY{n+nb}{len}\PY{p}{(}\PY{n}{thresholds\PYZus{}corr}\PY{p}{)}\PY{p}{)}\PY{p}{,}
                  \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EIO}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{is\PYZus{}weakly\PYZus{}connected}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
              \PY{n}{idx} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{k}{for} \PY{n}{t1} \PY{o+ow}{in} \PY{n}{thresholds\PYZus{}eio}\PY{p}{:}
                  \PY{k}{for} \PY{n}{t2} \PY{o+ow}{in} \PY{n}{thresholds\PYZus{}corr}\PY{p}{:}
                      \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{DiGraph}\PY{p}{(}\PY{p}{)}
                      \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}nodes\PYZus{}from}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}
                      \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{UG}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                          \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{eattr} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                              \PY{k}{if} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}requirement}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{eattr} \PY{o+ow}{and} \PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}requirement}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{t1}\PY{p}{)} \PY{o+ow}{or} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}demand}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{eattr} \PY{o+ow}{and} \PY{p}{(}\PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}demand}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{t1}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                                  \PY{k}{if} \PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{t2}\PY{p}{:} \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{nbr}\PY{p}{)}
                      \PY{n}{G} \PY{o}{=} \PY{n}{rmvIndepNodesFromGraph}\PY{p}{(}\PY{n}{G}\PY{p}{)}
                      \PY{n+nb}{print}\PY{p}{(}\PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                      \PY{k}{if} \PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                          \PY{n}{is\PYZus{}weakly\PYZus{}c} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{is\PYZus{}weakly\PYZus{}connected}\PY{p}{(}\PY{n}{G}\PY{p}{)}  
                          \PY{n+nb}{print}\PY{p}{(}\PY{n}{is\PYZus{}weakly\PYZus{}c}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                          \PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{idx}\PY{p}{,}\PY{p}{:}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{t1}\PY{p}{,} \PY{n}{t2}\PY{p}{,} \PY{n}{is\PYZus{}weakly\PYZus{}c}\PY{p}{]}
                      \PY{k}{else}\PY{p}{:}
                          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nill}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                          \PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{idx}\PY{p}{,}\PY{p}{:}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{t1}\PY{p}{,} \PY{n}{t2}\PY{p}{,} \PY{k+kc}{False}\PY{p}{]}
                      \PY{n}{idx} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
              \PY{k}{return} \PY{n}{df}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}231}]:} \PY{k}{def} \PY{n+nf}{continueCombineThresholdsOfEIOAndCorr}\PY{p}{(}\PY{n}{thresholds\PYZus{}eio}\PY{p}{,} \PY{n}{thresholds\PYZus{}corr}\PY{p}{,} \PY{n}{UG}\PY{p}{,} \PY{n}{start\PYZus{}point}\PY{p}{)}\PY{p}{:}
              \PY{k}{global} \PY{n}{df}
              \PY{n}{i} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{n}{idx} \PY{o}{=} \PY{n}{start\PYZus{}point}
              \PY{n}{cnt} \PY{o}{=} \PY{l+m+mi}{0}
              \PY{k}{for} \PY{n}{t1} \PY{o+ow}{in} \PY{n}{thresholds\PYZus{}eio}\PY{p}{:}
                  \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{[}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{]}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{cnt}\PY{p}{)}
                  \PY{k}{for} \PY{n}{t2} \PY{o+ow}{in} \PY{n}{thresholds\PYZus{}corr}\PY{p}{:}
                      \PY{k}{if} \PY{n}{i} \PY{o}{\PYZlt{}} \PY{n}{start\PYZus{}point}\PY{p}{:}
                          \PY{n}{i} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                          \PY{k}{continue}
                      \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{DiGraph}\PY{p}{(}\PY{p}{)}
                      \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}nodes\PYZus{}from}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}
                      \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{UG}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                          \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{eattr} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                              \PY{k}{if} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}requirement}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{eattr} \PY{o+ow}{and} \PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}requirement}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{t1}\PY{p}{)} \PY{o+ow}{or} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}demand}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{eattr} \PY{o+ow}{and} \PY{p}{(}\PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}demand}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{t1}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                                  \PY{k}{if} \PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{n}{t2}\PY{p}{:} \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{nbr}\PY{p}{)}
                      \PY{n}{G} \PY{o}{=} \PY{n}{rmvIndepNodesFromGraph}\PY{p}{(}\PY{n}{G}\PY{p}{)}
                      \PY{n+nb}{print}\PY{p}{(}\PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                      \PY{k}{if} \PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                          \PY{n}{is\PYZus{}weakly\PYZus{}c} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{is\PYZus{}weakly\PYZus{}connected}\PY{p}{(}\PY{n}{G}\PY{p}{)}  
                          \PY{n+nb}{print}\PY{p}{(}\PY{n}{is\PYZus{}weakly\PYZus{}c}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                          \PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{idx}\PY{p}{,}\PY{p}{:}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{t1}\PY{p}{,} \PY{n}{t2}\PY{p}{,} \PY{n}{is\PYZus{}weakly\PYZus{}c}\PY{p}{]}
                      \PY{k}{else}\PY{p}{:}
                          \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nill}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                          \PY{n}{df}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{n}{idx}\PY{p}{,}\PY{p}{:}\PY{p}{]} \PY{o}{=} \PY{p}{[}\PY{n}{t1}\PY{p}{,} \PY{n}{t2}\PY{p}{,} \PY{k+kc}{False}\PY{p}{]}
                      \PY{n}{idx} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
                  \PY{n}{cnt} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
\end{Verbatim}


    \hypertarget{read-eio-stock-return-files}{%
\paragraph{Read EIO \& stock return
files}\label{read-eio-stock-return-files}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}5}]:} \PY{n}{FILE\PYZus{}EIO\PYZus{}2016} \PY{o}{=} \PY{n}{ROOTPATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/Stock\PYZus{}DWCN/Source/lxl/EIO\PYZus{}2016.csv}\PY{l+s+s1}{\PYZsq{}}
        \PY{n}{EIO\PYZus{}matrix} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{matrix}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{genfromtxt}\PY{p}{(}\PY{n+nb}{open}\PY{p}{(}\PY{n}{FILE\PYZus{}EIO\PYZus{}2016}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rb}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{,} \PY{n}{delimiter}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{,}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{skip\PYZus{}header}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}\PY{p}{)}
        \PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{FILE\PYZus{}EIO\PYZus{}2016}\PY{p}{,} \PY{n}{nrows}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}\PY{o}{.}\PY{n}{columns}\PY{p}{)}\PY{p}{[}\PY{p}{:}\PY{o}{\PYZhy{}}\PY{l+m+mi}{2}\PY{p}{]}
        \PY{n}{FILE\PYZus{}STOCK\PYZus{}ABR} \PY{o}{=} \PY{n}{ROOTPATH} \PY{o}{+} \PY{l+s+sa}{r}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/Stock\PYZus{}DWCN/Source/DF\PYZus{}STOCK\PYZus{}ABR.csv}\PY{l+s+s1}{\PYZsq{}}
        \PY{n}{df\PYZus{}stock\PYZus{}abr} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{n}{FILE\PYZus{}STOCK\PYZus{}ABR}\PY{p}{)}\PY{o}{.}\PY{n}{set\PYZus{}index}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Date}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{index}\PY{o}{=}\PY{n}{df\PYZus{}stock\PYZus{}abr}\PY{o}{.}\PY{n}{index}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{n}{df\PYZus{}stock\PYZus{}abr}\PY{o}{.}\PY{n}{columns}\PY{p}{)}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{DICT\PYZus{}STP}\PY{p}{:} \PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{DICT\PYZus{}STP}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{log\PYZus{}return}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    \hypertarget{construct-two-normalised-eio-matrices}{%
\subsection{2. Construct two normalised EIO
matrices}\label{construct-two-normalised-eio-matrices}}

\textbf{Direct requirements matrix} contains direct coefficients
\(a_{ij}=z_{ij}/X_j\), \textbf{Direct demands matrix} contains direct
coefficients \(a_{ij}=z_{ij}/X'_i\) \textbf{X} is the total industrial
input that lies in the last row of the EIO matrix \textbf{Z}, while
\textbf{X'} is the total throughput of the economy that lies in the last
column of the EIO matrix \textbf{Z}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}6}]:} \PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix} \PY{o}{=} \PY{n}{genEIODirectMatrix}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{requirements}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix} \PY{o}{=} \PY{n}{genEIODirectMatrix}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{demands}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        
        \PY{n}{mat\PYZus{}max} \PY{o}{=} \PY{l+m+mi}{0}
        \PY{k}{for} \PY{n}{m} \PY{o+ow}{in} \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{:}
            \PY{n}{max\PYZus{}t} \PY{o}{=} \PY{n+nb}{max}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{m}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
            \PY{k}{if} \PY{n}{max\PYZus{}t} \PY{o}{\PYZgt{}} \PY{n}{mat\PYZus{}max} \PY{o+ow}{and} \PY{n}{max\PYZus{}t} \PY{o}{\PYZlt{}} \PY{l+m+mi}{1}\PY{p}{:}
                \PY{n}{mat\PYZus{}max} \PY{o}{=} \PY{n}{max\PYZus{}t}
                \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{mat\PYZus{}max: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{mat\PYZus{}max}\PY{p}{)}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{o}{.}\PY{n}{shape}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{:}
            \PY{n}{ar\PYZus{}m} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}
            \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{ar\PYZus{}m}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                \PY{k}{if} \PY{n}{ar\PYZus{}m}\PY{p}{[}\PY{n}{j}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{l+m+mi}{1}\PY{p}{:}
                    \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{ceil}\PY{p}{(}\PY{n}{mat\PYZus{}max}\PY{o}{*}\PY{l+m+mf}{10.0}\PY{p}{)}\PY{o}{/}\PY{l+m+mf}{10.0}
                    \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix[}\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{, }\PY{l+s+si}{\PYZpc{}d}\PY{l+s+s1}{]: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{,} \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
mat\_max: 0.5478228618456674
EIO\_direct\_demands\_matrix[2, 23]: 0.6

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}7}]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Max in EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{max}\PY{p}{(}\PY{p}{[}\PY{n+nb}{max}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{m}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{m} \PY{o+ow}{in} \PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}\PY{p}{]}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Max in EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{max}\PY{p}{(}\PY{p}{[}\PY{n+nb}{max}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{m}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{m} \PY{o+ow}{in} \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
Max in EIO\_direct\_requirements\_matrix: 0.5746371284958474
Max in EIO\_direct\_demands\_matrix: 0.6

    \end{Verbatim}

    \hypertarget{pre-processing-for-construction-of-stock-networks}{%
\subsection{3. Pre-processing for Construction of Stock
Networks}\label{pre-processing-for-construction-of-stock-networks}}

    \hypertarget{pre-process-normalised-eio-matrices}{%
\paragraph{Pre-process normalised EIO
matrices}\label{pre-process-normalised-eio-matrices}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}8}]:} \PY{n}{ar\PYZus{}all\PYZus{}DR\PYZus{}Mat} \PY{o}{=} \PY{n}{getAllMatrixContent}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}\PY{p}{)}
        \PY{n}{ar\PYZus{}all\PYZus{}DD\PYZus{}Mat} \PY{o}{=} \PY{n}{getAllMatrixContent}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{)}
        
        \PY{n}{ar\PYZus{}all\PYZus{}DR\PYZus{}trans} \PY{o}{=} \PY{p}{[}\PY{n}{logarise}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{ar\PYZus{}all\PYZus{}DR\PYZus{}Mat}\PY{p}{]}
        \PY{n}{ar\PYZus{}all\PYZus{}DD\PYZus{}trans} \PY{o}{=} \PY{p}{[}\PY{n}{logarise}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{ar\PYZus{}all\PYZus{}DD\PYZus{}Mat}\PY{p}{]}
        
        \PY{n}{theta\PYZus{}thresholds\PYZus{}DR\PYZus{}all}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DR\PYZus{}all} \PY{o}{=} \PY{n}{genEdgeDensity}\PY{p}{(}\PY{n}{ar\PYZus{}all\PYZus{}DR\PYZus{}trans}\PY{p}{,} \PY{l+m+mi}{100}\PY{p}{)}
        \PY{n}{theta\PYZus{}thresholds\PYZus{}DD\PYZus{}all}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DD\PYZus{}all} \PY{o}{=} \PY{n}{genEdgeDensity}\PY{p}{(}\PY{n}{ar\PYZus{}all\PYZus{}DD\PYZus{}trans}\PY{p}{,} \PY{l+m+mi}{100}\PY{p}{)}
        
        \PY{n}{ar\PYZus{}nonzero\PYZus{}DR\PYZus{}Mat} \PY{o}{=} \PY{n}{getNonzeroMatrixContent}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}\PY{p}{)}
        \PY{n}{ar\PYZus{}nonzero\PYZus{}DD\PYZus{}Mat} \PY{o}{=} \PY{n}{getNonzeroMatrixContent}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{)}
        
        \PY{n}{ar\PYZus{}nonzero\PYZus{}DR\PYZus{}trans} \PY{o}{=} \PY{p}{[}\PY{n}{logarise}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{ar\PYZus{}nonzero\PYZus{}DR\PYZus{}Mat}\PY{p}{]}
        \PY{n}{ar\PYZus{}nonzero\PYZus{}DD\PYZus{}trans} \PY{o}{=} \PY{p}{[}\PY{n}{logarise}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{ar\PYZus{}nonzero\PYZus{}DD\PYZus{}Mat}\PY{p}{]}
        
        \PY{n}{theta\PYZus{}thresholds\PYZus{}DR}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DR} \PY{o}{=} \PY{n}{genEdgeDensity}\PY{p}{(}\PY{n}{ar\PYZus{}nonzero\PYZus{}DR\PYZus{}trans}\PY{p}{,} \PY{l+m+mi}{100}\PY{p}{)}
        \PY{n}{theta\PYZus{}thresholds\PYZus{}DD}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DD} \PY{o}{=} \PY{n}{genEdgeDensity}\PY{p}{(}\PY{n}{ar\PYZus{}nonzero\PYZus{}DD\PYZus{}trans}\PY{p}{,} \PY{l+m+mi}{100}\PY{p}{)}
\end{Verbatim}


    {[}Figures{]} show the relationship between transaction density and
thresholds of direct requirement and direct demand respectively. As we
can see, two graphs are very similar, so we set \(\theta_1=\theta_2\).

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}9}]:} \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
        \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{threshold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Transaction density}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Direct Requirement}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}DR\PYZus{}all}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DR\PYZus{}all}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}
        \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{threshold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Transaction density}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Direct Demand}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}DD\PYZus{}all}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DD\PYZus{}all}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}
        \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_17_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}108}]:} \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
          \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{threshold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Transaction density}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Direct Requirement}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}DR}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DR}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}
          \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{l+m+mi}{2}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{2}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{threshold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Transaction density}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Direct Demand}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}DD}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}DD}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}
          \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_18_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{pre-process-correlation-coefficients}{%
\paragraph{Pre-process correlation
coefficients}\label{pre-process-correlation-coefficients}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{theta\PYZus{}thresholds\PYZus{}corr}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}corr} \PY{o}{=} \PY{n}{genEdgeDensity}\PY{p}{(}\PY{n}{corr\PYZus{}coef\PYZus{}CN}\PY{p}{,} \PY{l+m+mi}{100}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}109}]:} \PY{n}{fig} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{p}{)}
          \PY{n}{ax} \PY{o}{=} \PY{n}{fig}\PY{o}{.}\PY{n}{add\PYZus{}subplot}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{,}\PY{l+m+mi}{1}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{threshold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Edge density}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Correlation Coefficient}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{fontsize}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{large}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{plot}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}corr}\PY{p}{,} \PY{n}{edge\PYZus{}densities\PYZus{}corr}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{blue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{lw}\PY{o}{=}\PY{l+m+mi}{2}\PY{p}{)}
          \PY{n}{fig}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_21_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{determine-the-thresholds-of-eio-and-correaltion-networks-for-contructing-stock-networks}{%
\paragraph{Determine the thresholds of EIO and correaltion networks for
contructing stock
networks}\label{determine-the-thresholds-of-eio-and-correaltion-networks-for-contructing-stock-networks}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}
                \PY{n}{index}\PY{o}{=}\PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}DR}\PY{p}{)}\PY{o}{*}\PY{n+nb}{len}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}corr}\PY{p}{)}\PY{p}{)}\PY{p}{,}
                \PY{n}{columns}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EIO}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{is\PYZus{}weakly\PYZus{}connected}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{continueCombineThresholdsOfEIOAndCorr}\PY{p}{(}\PY{n}{theta\PYZus{}thresholds\PYZus{}DR}\PY{p}{,} \PY{n}{theta\PYZus{}thresholds\PYZus{}corr}\PY{p}{,} \PY{n}{UniG}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}236}]:} \PY{n}{df\PYZus{}cteac} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
          \PY{n}{pt\PYZus{}cteac} \PY{o}{=} \PY{n}{df\PYZus{}cteac}\PY{o}{.}\PY{n}{pivot\PYZus{}table}\PY{p}{(}\PY{n}{index}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EIO}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{values}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{is\PYZus{}weakly\PYZus{}connected}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{aggfunc}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}390}]:} \PY{n}{f}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize} \PY{o}{=} \PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{)}\PY{p}{)}
          \PY{c+c1}{\PYZsh{}cmap = sns.cubehelix\PYZus{}palette(start = 1, rot = 3, gamma=0.8, as\PYZus{}cmap = True)}
          \PY{n}{sns}\PY{o}{.}\PY{n}{heatmap}\PY{p}{(}\PY{n}{pt\PYZus{}cteac}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{25}\PY{p}{,}\PY{l+m+mi}{30}\PY{p}{:}\PY{l+m+mi}{70}\PY{p}{]}\PY{p}{,} \PY{n}{cmap}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rainbow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{linewidths} \PY{o}{=} \PY{l+m+mf}{0.05}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{ax}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Amounts of directions per DR\PYZhy{}threshold and DD\PYZhy{}threshold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{EIO}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}390}]:} Text(69,0.5,'EIO')
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_26_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}11}]:} \PY{n}{df\PYZus{}combined\PYZus{}thresholds} \PY{o}{=} \PY{n}{combineThresholds}\PY{p}{(}
             \PY{n}{theta\PYZus{}thresholds\PYZus{}DR}\PY{p}{,}
             \PY{n}{theta\PYZus{}thresholds\PYZus{}DD}\PY{p}{,}
             \PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}\PY{p}{,}
             \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
100{\ldots}
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}12}]:} \PY{n}{pt} \PY{o}{=} \PY{n}{df\PYZus{}combined\PYZus{}thresholds}\PY{o}{.}\PY{n}{pivot\PYZus{}table}\PY{p}{(}\PY{n}{index}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{theta\PYZus{}DR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{columns}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{theta\PYZus{}DD}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{values}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{no\PYZus{}directions}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{aggfunc}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{sum}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}13}]:} \PY{n}{f}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{n}{figsize} \PY{o}{=} \PY{p}{(}\PY{l+m+mi}{10}\PY{p}{,} \PY{l+m+mi}{4}\PY{p}{)}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}cmap = sns.cubehelix\PYZus{}palette(start = 1, rot = 3, gamma=0.8, as\PYZus{}cmap = True)}
         \PY{n}{sns}\PY{o}{.}\PY{n}{heatmap}\PY{p}{(}\PY{n}{pt}\PY{o}{.}\PY{n}{iloc}\PY{p}{[}\PY{p}{:}\PY{l+m+mi}{20}\PY{p}{,}\PY{p}{:}\PY{l+m+mi}{20}\PY{p}{]}\PY{p}{,} \PY{n}{cmap}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{rainbow}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{linewidths} \PY{o}{=} \PY{l+m+mf}{0.05}\PY{p}{,} \PY{n}{ax} \PY{o}{=} \PY{n}{ax}\PY{p}{)}
         \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Amounts of directions per DR\PYZhy{}threshold and DD\PYZhy{}threshold}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{theta\PYZus{}DD}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{ax}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{theta\PYZus{}DR}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}13}]:} Text(69,0.5,'theta\_DR')
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_29_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{networks-construction}{%
\subsection{3. Networks construction}\label{networks-construction}}

The networks that are studies in this paper represent the set of stocks
traded in the NYSE stock market in the U.S., companies which registered
out of U.S. are filtered out. As a result, 1418 stocks are considered
and analysed with daily logarithmic changes of close prices in 2016.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}219}]:} \PY{c+c1}{\PYZsh{} function for generating PGD}
          \PY{k}{def} \PY{n+nf}{genPureDedirectedGraph}\PY{p}{(}\PY{n}{theta\PYZus{}1}\PY{p}{,} \PY{n}{theta\PYZus{}2}\PY{p}{,} \PY{n}{mat\PYZus{}1}\PY{p}{,} \PY{n}{mat\PYZus{}2}\PY{p}{)}\PY{p}{:}
              \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{DiGraph}\PY{p}{(}\PY{p}{)}
              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}nodes\PYZus{}from}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{:}
                  \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  \PY{n}{matidx\PYZus{}i} \PY{o}{=} \PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{o}{.}\PY{n}{index}\PY{p}{(}
                      \PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BEA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                  \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{:}
                      \PY{k}{if} \PY{n}{i} \PY{o+ow}{is} \PY{o+ow}{not} \PY{n}{j}\PY{p}{:}
                          \PY{n}{matidx\PYZus{}j} \PY{o}{=} \PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{o}{.}\PY{n}{index}\PY{p}{(}
                              \PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{j}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BEA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                          \PY{n}{a} \PY{o}{=} \PY{n}{mat\PYZus{}1}\PY{p}{[}\PY{n}{matidx\PYZus{}i}\PY{p}{,} \PY{n}{matidx\PYZus{}j}\PY{p}{]}
                          \PY{n}{b} \PY{o}{=} \PY{n}{mat\PYZus{}2}\PY{p}{[}\PY{n}{matidx\PYZus{}i}\PY{p}{,} \PY{n}{matidx\PYZus{}j}\PY{p}{]}
                          \PY{k}{if} \PY{n}{a} \PY{o}{\PYZgt{}} \PY{l+m+mf}{0.0} \PY{o+ow}{and} \PY{n}{logarise}\PY{p}{(}\PY{n}{a}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{theta\PYZus{}1}\PY{p}{:}
                              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{)}
                          \PY{k}{if} \PY{n}{b} \PY{o}{\PYZgt{}} \PY{l+m+mf}{0.0} \PY{o+ow}{and} \PY{n}{logarise}\PY{p}{(}\PY{n}{b}\PY{p}{)} \PY{o}{\PYZgt{}} \PY{n}{theta\PYZus{}2}\PY{p}{:}
                              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{j}\PY{p}{,} \PY{n}{i}\PY{p}{)}
              \PY{k}{return} \PY{n}{G}
          
          \PY{c+c1}{\PYZsh{} function for generating UGD}
          \PY{k}{def} \PY{n+nf}{genUniversalGraph}\PY{p}{(}\PY{n}{stock\PYZus{}return\PYZus{}df}\PY{p}{)}\PY{p}{:}
              \PY{k}{global} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}
              \PY{k}{global} \PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}
              \PY{k}{global} \PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}
              \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{DiGraph}\PY{p}{(}\PY{p}{)}
              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}nodes\PYZus{}from}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{:}
                  \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  \PY{n}{matidx\PYZus{}i} \PY{o}{=} \PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{i}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BEA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                  \PY{n}{S1} \PY{o}{=} \PY{n}{stock\PYZus{}return\PYZus{}df}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                  \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{:}
                      \PY{k}{if} \PY{n}{i} \PY{o+ow}{is} \PY{o+ow}{not} \PY{n}{j}\PY{p}{:}
                          \PY{n}{matidx\PYZus{}j} \PY{o}{=} \PY{n}{EIO\PYZus{}industry\PYZus{}BEA\PYZus{}code\PYZus{}list}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{o}{.}\PY{n}{loc}\PY{p}{[}\PY{n}{j}\PY{p}{,}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{BEA}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                          \PY{k}{if} \PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}\PY{p}{[}\PY{n}{matidx\PYZus{}i}\PY{p}{,} \PY{n}{matidx\PYZus{}j}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{,} \PY{n}{direct\PYZus{}requirement} \PY{o}{=} \PY{n}{logarise}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}\PY{p}{[}\PY{n}{matidx\PYZus{}i}\PY{p}{,} \PY{n}{matidx\PYZus{}j}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                          \PY{k}{if} \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{[}\PY{n}{matidx\PYZus{}j}\PY{p}{,} \PY{n}{matidx\PYZus{}i}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{,} \PY{n}{direct\PYZus{}demand} \PY{o}{=} \PY{n}{logarise}\PY{p}{(}\PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{[}\PY{n}{matidx\PYZus{}j}\PY{p}{,} \PY{n}{matidx\PYZus{}i}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                          \PY{k}{if} \PY{n}{G}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{)}\PY{p}{:} \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{,} \PY{n}{corr}\PY{o}{=}\PY{n}{S1}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{n}{stock\PYZus{}return\PYZus{}df}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{)}\PY{p}{)}
              \PY{k}{return} \PY{n}{G}
          
          \PY{k}{def} \PY{n+nf}{genWDGraphFromPureDirectedGraph}\PY{p}{(}\PY{n}{PGD}\PY{p}{,} \PY{n}{return\PYZus{}list}\PY{p}{,} \PY{n}{threshold}\PY{o}{=}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{:}
              \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{DiGraph}\PY{p}{(}\PY{p}{)}
              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}nodes\PYZus{}from}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}
              \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{PGD}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                  \PY{n}{S1} \PY{o}{=} \PY{n}{return\PYZus{}list}\PY{p}{[}\PY{n}{n}\PY{p}{]}
                  \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{eattr} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                      \PY{n}{S2} \PY{o}{=} \PY{n}{return\PYZus{}list}\PY{p}{[}\PY{n}{nbr}\PY{p}{]}
                      \PY{n}{corr} \PY{o}{=} \PY{n}{S1}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{n}{S2}\PY{p}{)}
                      \PY{k}{if} \PY{n}{corr} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{threshold}\PY{p}{:} \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{nbr}\PY{p}{,} \PY{n}{corr}\PY{o}{=}\PY{n}{corr}\PY{p}{)}
              \PY{k}{return} \PY{n}{G}
          
          \PY{c+c1}{\PYZsh{} function for generating PCGD}
          \PY{c+c1}{\PYZsh{} generate partial correlation directed graph}
          \PY{k}{def} \PY{n+nf}{genPartCorrGraph}\PY{p}{(}\PY{n}{UGD}\PY{p}{)}\PY{p}{:}
              \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{DiGraph}\PY{p}{(}\PY{p}{)}
              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}nodes\PYZus{}from}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}
              \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{UGD}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                  \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{eattr} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                      \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{nbr}\PY{p}{,} \PY{n}{weight}\PY{o}{=}\PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
              \PY{k}{return} \PY{n}{G}
          
          \PY{c+c1}{\PYZsh{} function for generating ECGU}
          \PY{c+c1}{\PYZsh{} generate entire correlation undirected graph}
          \PY{k}{def} \PY{n+nf}{genEntCorrGraph}\PY{p}{(}\PY{p}{)}\PY{p}{:}
              \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{Graph}\PY{p}{(}\PY{p}{)}
              \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}nodes\PYZus{}from}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{LENTCKR}\PY{p}{)}\PY{p}{:}
                  \PY{n}{S1} \PY{o}{=} \PY{n}{df\PYZus{}stock\PYZus{}abr}\PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]}
                  \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{LENTCKR}\PY{p}{)}\PY{p}{:}
                      \PY{n}{S2} \PY{o}{=} \PY{n}{df\PYZus{}stock\PYZus{}abr}\PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{]}
                      \PY{n}{G}\PY{o}{.}\PY{n}{add\PYZus{}edge}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{nbr}\PY{p}{,} \PY{n}{weight}\PY{o}{=}\PY{n}{S1}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{n}{S2}\PY{p}{)}\PY{p}{)}
              \PY{k}{return} \PY{n}{G}
          
          \PY{k}{def} \PY{n+nf}{rmvEdgeAttrOfGraph}\PY{p}{(}\PY{n}{WG}\PY{p}{)}\PY{p}{:}
              \PY{n}{G} \PY{o}{=} \PY{n}{WG}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
              \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{G}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                  \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{eattr} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                      \PY{k}{if} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{eattr}\PY{p}{:} \PY{k}{del} \PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
              \PY{k}{return} \PY{n}{G}
          
          \PY{k}{def} \PY{n+nf}{rmvIndepNodesFromGraph}\PY{p}{(}\PY{n}{WholeG}\PY{p}{)}\PY{p}{:}
              \PY{n}{G} \PY{o}{=} \PY{n}{WholeG}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
              \PY{k}{for} \PY{n}{n} \PY{o+ow}{in} \PY{n}{WholeG}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                  \PY{k}{if} \PY{n}{WholeG}\PY{o}{.}\PY{n}{degree}\PY{p}{(}\PY{n}{n}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:} \PY{n}{G}\PY{o}{.}\PY{n}{remove\PYZus{}node}\PY{p}{(}\PY{n}{n}\PY{p}{)}
              \PY{k}{return} \PY{n}{G}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}250}]:} \PY{n}{DiUnwtG\PYZus{}1} \PY{o}{=} \PY{n}{genPureDedirectedGraph}\PY{p}{(}
              \PY{l+m+mf}{0.76}\PY{p}{,} \PY{c+c1}{\PYZsh{}0.4}
              \PY{l+m+mf}{0.76}\PY{p}{,} \PY{c+c1}{\PYZsh{}0.4}
              \PY{n}{EIO\PYZus{}direct\PYZus{}requirements\PYZus{}matrix}\PY{p}{,}
              \PY{n}{EIO\PYZus{}direct\PYZus{}demands\PYZus{}matrix}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
A AAL AAN AAOI AAON AAPL AAT AAWW ABAX ABBV ABC ABCB ABCO ABMD ABT ACC ACET ACHC ACHN ACIW ACLS ACM ACOR ACRE ACXM ADBE ADC ADI ADP ADS ADTN ADUS AE AEE AEGN AEIS AEL AEO AEP AEPI AET AFG AFH AFL AFSI AGCO AGM AGNC AGTC AHP AHT AI AIG AIMC AIN AIZ AJG AKAM AKR AKRX AL ALB ALE ALEX ALG ALGN ALGT ALK ALL ALOG ALSN ALX ALXN AMAG AMAT AMBA AMCX AME AMED AMG AMGN AMKR AMNB AMP AMSF AMSWA AMT AMTD AMZN ANAT ANCX ANF ANH ANIK ANIP ANSS ANTM AOSL AP APAM APH APOG ARCB ARE ARI ARII AROW ARRS ARRY ARTNA ARW ASGN ASTE ATHN ATLO ATNI ATO ATR ATRI ATRO ATSG ATVI AVA AVAV AVB AVGO AVHI AVT AWI AWK AWR AXE AXL AYR BA BABY BAC BAH BANC BANF BANR BAX BBGI BBRG BBSI BBT BBW BCEI BCO BDC BDGE BDN BDX BEAT BELFB BEN BERY BFAM BFIN BFS BH BHB BHE BHLB BID BIIB BIO BJRI BK BKE BKH BKMU BKU BLDR BLK BLKB BLL BLMN BMI BMRC BMTC BMY BNCL BNCN BOFI BOH BOKF BPFH BPOP BR BREW BRKL BRKR BRKS BRO BSET BSFT BSRR BSTC BSX BTX BUSE BWA BWINB BXP BYD BZH C CA CAC CACC CACI CAH CAKE CAMP CASH CASS CAT CATM CATO CATY CBK CBL CBM CBRL CBS CBSH CBU CBZ CCBG CCI CCK CCMP CCNE CCRN CDNS CDR CEB CECE CELG CERN CEVA CFFI CFFN CFG CFNB CFR CFX CGNX CHCO CHDN CHE CHEF CHFC CHFN CHMG CHRW CHS CHSP CHTR CHUY CI CIA CIEN CIM CINF CIT CLC CLCT CLD CLDT CLFD CLGX CLI CLMS CLNY CLW CLX CMC CMCO CMCSA CMG CMLS CMO CMS CMTL CNA CNBKA CNC CNMD CNO CNOB CNP CNS CNSL COBZ COF COHR COHU COKE COL COLB CONE COO COR CORE CORR CORT COTY COWN CPF CPK CPS CPSI CPT CRAI CRAY CREE CRL CRM CRS CRUS CRVL CRY CSFL CSGP CSGS CSRA CSS CSX CTB CTBI CTG CTL CTRE CTS CTSH CTWS CTXS CUB CUBE CUBI CUTR CUZ CVBF CVCO CVG CVGI CVI CVLT CVS CVX CWT CXO CXW CYH CYNO CYS CYTK CZNC CZR D DAL DAN DBD DCI DCO DCOM DCT DDR DE DECK DEI DEL DFRG DFS DGAS DGI DGICA DGX DHI DHIL DHR DIN DIOD DIS DISCA DISCK DISH DJCO DK DLB DLR DO DOC DORM DRE DRH DRI DRQ DSPG DST DSW DTE DTLK DUK DX DXPE DY DYN EA EBAY EBF EBIO EBIX EBS EBSB EBTC ECHO ECOL ECPG ED EDE EDR EE EEFT EFSC EGBN EGOV EGP EHTH EIG EIGI EL ELLI ELS ELY EMCI EME EMN ENH ENS ENSG ENTA ENTG ENV ENZ EPAM EPM EPR EQIX EQR EQT EQY ERA ERIE ERII ES ESCA ESE ESL ESRT ESRX ESS ESSA ETFC ETH ETM ETR EV EVC EVER EVHC EVR EVTC EW EWBC EXAC EXAR EXC EXLS EXP EXPD EXPO EXR F FAF FARO FBC FBIZ FBNC FBNK FBP FC FCBC FCF FCN FCNCA FDEF FDML FDX FE FELE FFBC FFG FFIC FFIN FFKT FGL FHN FIBK FICO FII FINL FIS FISI FISV FITB FIX FIZZ FL FLIC FLIR FLS FLT FMBI FNB FNF FNGN FNHC FNLC FNSR FOE FORM FOSL FOX FOXA FOXF FPRX FR FRBK FRGI FRME FRSH FRT FSLR FSP FSS FTNT FUL FULT FWRD GABC GAIA GBCI GBNK GBX GCAP GCI GCO GEF GEO GERN GFF GGG GGP GHL GILD GIMO GLT GLW GM GME GMED GNE GNRC GNTX GPC GPN GPS GRC GRPN GRUB GS GSAT GSBC GSIT GT GTLS GTN GTS GTT GWR GWRE GXP H HA HAE HAFC HALL HAR HAS HASI HBAN HBCP HBHC HCI HCKT HCOM HCP HD HDNG HE HEI HELE HF HFC HFWA HHC HIG HIIQ HIL HIW HLF HMN HMST HMSY HMTV HNI HOG HOLX HOMB HON HP HPT HR HRC HRL HRS HRTG HSIC HSII HST HT HTA HTBI HTBK HTH HTLD HTLF HUBG HUM HURC HURN HVT HW HWCC HXL HY IART IBCP IBKC IBKR IBOC IBTX ICFI ICUI IDA IDCC IDT IDTI IDXX IEX IHC III IIVI ILMN IMMR INCY INDB INFI INFN INGN INN INSY INT INTC INTU INVN INWK IP IPAR IPCC IPG IPGP IPHI IPXL IQNT IRDM IRET IRM ISBC ISCA ISIL ISLE ISRG ISRL ISSC IT ITG ITIC ITRI ITT IVR IVZ JACK JAKK JBHT JBL JBLU JCOM JJSF JKHY JLL JNJ JNS JOE JONE JOUT JPM JWN KBH KCG KELYA KEY KFRC KFY KIM KLAC KMI KMPR KNX KODK KRA KRC KRG KRNY KS KSU KVHI L LADR LAMR LBAI LCI LCNB LDL LDOS LE LEA LFUS LFVN LGND LH LHCG LHO LII LION LKFN LLL LLTC LLY LM LMNX LMOS LNC LNCE LNDC LNN LNT LOCK LOGM LOW LPG LPNT LQ LRCX LSTR LTC LUK LUV LVS LXP MA MAC MAN MANH MANT MAR MASI MAT MBFI MBI MBWM MC MCBC MCD MCHP MCHX MCK MCRI MCY MDC MDP MDR MDRX MDSO MDXG MEI MET MFA MG MGM MGRC MHK MHO MINI MITK MITT MKL MKSI MKTX MLAB MLR MMC MMI MMM MMS MMSI MNR MNST MO MOD MOFG MOH MORN MOV MPAA MPC MPW MPWR MRK MRLN MRTN MS MSA MSCC MSCI MSEX MSFT MSL MSM MSTR MTB MTD MTG MTGE MTH MTSC MTSI MTW MTZ MU MXIM MYCC MYE MYGN MYL MYRG NANO NATI NATR NAVG NAVI NBHC NBTB NCI NCR NCS NDSN NEE NEOG NEWM NFBK NFLX NGHC NGS NHC NHI NI NICK NIHD NILE NJR NKE NKSH NLS NLY NMIH NNBR NNI NOC NP NPTN NRIM NRZ NSC NSIT NSM NSP NSR NTAP NTCT NTGR NTRI NTRS NUE NUS NUTR NUVA NVDA NVEC NVR NWBI NWE NWHM NWL NWLI NWN NWS NWSA NXST NYCB NYLD NYMT NYT O OB OCFC OCLR ODFL OFC OFG OFIX OGE OGS OHI OI OII OIS OKE OLBK OLP OMC OMCL OMI ONB OPK OPY ORA ORCL ORI ORIT OSIS OSK OSTK OSUR OTTR PACW PAHC PAY PAYC PB PBCT PBF PBH PBI PBPB PCAR PCG PCH PCRX PCYG PDCO PDFS PDLI PDM PEB PEBO PEG PEGA PETS PFE PFG PFIS PFS PFSI PGC PGNX PGR PGTI PHIIK PHM PJC PKE PKI PKY PLAB PLCE PLD PLKI PLOW PLPC PLPM PLT PLUS PLXS PMC PMT PNC PNFP PNK PNM PNW POL POR POWI POWL PPBI PPC PPG PPL PRA PRFT PRGS PRI PRIM PRK PRU PRXL PSA PSB PSTB PSX PTSI PWOD PWR PYPL PZN PZZA QADA QCOM QLYS QRVO QSII RAD RAI RAIL RAS RAVN RBC RBCAA RDC RDN RDNT RECN REGN REIS REXR RF RGA RGEN RH RHI RHP RJF RLGY RLI RLJ RM RMAX RMBS RMD RNST ROG ROIC ROK ROLL ROP ROST RP RPAI RPM RPT RPXC RRGB RRTS RS RSG RSO RTEC RTIX RTN RTRX RUTH RWT RYN SAFM SAFT SAIA SAIC SALM SAM SAMG SANM SASR SATS SAVE SBCF SBGI SBRA SBSI SCAI SCG SCHL SCHW SCS SCSC SCVL SEB SEIC SEMG SENEA SF SFBS SFLY SFNC SGA SHEN SHLM SHO SIGI SIGM SIR SIVB SJI SJM SJW SKT SKYW SLAB SLB SLG SLGN SLM SMCI SMP SMRT SMTC SNCR SNH SNPS SNV SNX SO SPA SPAR SPG SPR SPSC SPTN SPWR SRCE SRDX SRE SRI SSI SSNC SSP SSTK STAG STAR STBA STBZ STC STFC STI STJ STL STLD STMP STRT STT STWD SUI SUN SUP SUPN SWKS SWM SWX SXC SYBT SYK SYKE SYMC SYNA SYNT T TAP TAST TAX TBI TBNK TCBK TCO TDC TDS TDY TECD TECH TEN TER TESS TEX TFSL TFX TGNA THFF THG THO THRM TIF TILE TIPT TIS TIVO TJX TKR TMH TMHC TMK TMO TMP TMUS TNET TOL TOWR TPH TREC TREE TRGP TRK TRMB TRMK TRN TRR TRST TSC TSN TSS TTC TTEC TTEK TTGT TTMI TTWO TUP TWMC TWO TWX TXN TXRH TYL TYPE TZOO UAL UAM UBA UBNK UBNT UBSH UBSI UCBI UCFC UCP UCTT UDR UEIC UFCS UFPI UFPT UFS UGI UHS UHT UIHC ULTI UMBF UMPQ UNFI UNH UNM UNP URBN URI USAK USB USCR USM USNA UTEK UTHR UTL UTMD UTX UVE UVSP V VAC VAL VAR VDSI VG VIAB VICR VIVO VLO VLY VMW VNO VOXX VOYA VRNT VRSK VRTS VRTU VSAT VSEC VTR VVC VVI VVUS VZ WAB WABC WAFD WAGE WAIR WAL WASH WAT WBA WBS WCC WCG WCIC WDC WDR WEC WERN WETF WEX WFC WGL WGO WHG WIN WLH WM WNC WNR WR WRB WRE WRI WRLD WSBC WSBF WSFS WSR WTBA WTFC WTR WU WWE WY WYN WYNN XCRA XEL XLNX XNCR XOM XRAY XRX XXIA XYL Y YDKN YORW YUM ZGNX ZION ZIXI ZLTQ ZOES ZTS 
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}251}]:} \PY{n}{DiWtG\PYZus{}NmRt\PYZus{}1} \PY{o}{=} \PY{n}{genWDGraphFromPureDirectedGraph}\PY{p}{(}\PY{n}{DiUnwtG\PYZus{}1}\PY{p}{,} \PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return}\PY{p}{,} \PY{l+m+mf}{0.36}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}256}]:} \PY{n}{DiWtG\PYZus{}NmRt\PYZus{}1}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}edges}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}256}]:} 82968
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}252}]:} \PY{n}{DiG\PYZus{}3} \PY{o}{=} \PY{n}{rmvEdgeAttrOfGraph}\PY{p}{(}\PY{n}{DiWtG\PYZus{}NmRt\PYZus{}1}\PY{p}{)}
          \PY{n}{DiG\PYZus{}4} \PY{o}{=} \PY{n}{rmvIndepNodesFromGraph}\PY{p}{(}\PY{n}{DiG\PYZus{}3}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}258}]:} \PY{n}{DiG\PYZus{}4}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}258}]:} 1247
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}183}]:} \PY{n}{UniG} \PY{o}{=} \PY{n}{genUniversalGraph}\PY{p}{(}\PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
A AAL AAN AAOI AAON AAPL AAT AAWW ABAX ABBV ABC ABCB ABCO ABMD ABT ACC ACET ACHC ACHN ACIW ACLS ACM ACOR ACRE ACXM ADBE ADC ADI ADP ADS ADTN ADUS AE AEE AEGN AEIS AEL AEO AEP AEPI AET AFG AFH AFL AFSI AGCO AGM AGNC AGTC AHP AHT AI AIG AIMC AIN AIZ AJG AKAM AKR AKRX AL ALB ALE ALEX ALG ALGN ALGT ALK ALL ALOG ALSN ALX ALXN AMAG AMAT AMBA AMCX AME AMED AMG AMGN AMKR AMNB AMP AMSF AMSWA AMT AMTD AMZN ANAT ANCX ANF ANH ANIK ANIP ANSS ANTM AOSL AP APAM APH APOG ARCB ARE ARI ARII AROW ARRS ARRY ARTNA ARW ASGN ASTE ATHN ATLO ATNI ATO ATR ATRI ATRO ATSG ATVI AVA AVAV AVB AVGO AVHI AVT AWI AWK AWR AXE AXL AYR BA BABY BAC BAH BANC BANF BANR BAX BBGI BBRG BBSI BBT BBW BCEI BCO BDC BDGE BDN BDX BEAT BELFB BEN BERY BFAM BFIN BFS BH BHB BHE BHLB BID BIIB BIO BJRI BK BKE BKH BKMU BKU BLDR BLK BLKB BLL BLMN BMI BMRC BMTC BMY BNCL BNCN BOFI BOH BOKF BPFH BPOP BR BREW BRKL BRKR BRKS BRO BSET BSFT BSRR BSTC BSX BTX BUSE BWA BWINB BXP BYD BZH C CA CAC CACC CACI CAH CAKE CAMP CASH CASS CAT CATM CATO CATY CBK CBL CBM CBRL CBS CBSH CBU CBZ CCBG CCI CCK CCMP CCNE CCRN CDNS CDR CEB CECE CELG CERN CEVA CFFI CFFN CFG CFNB CFR CFX CGNX CHCO CHDN CHE CHEF CHFC CHFN CHMG CHRW CHS CHSP CHTR CHUY CI CIA CIEN CIM CINF CIT CLC CLCT CLD CLDT CLFD CLGX CLI CLMS CLNY CLW CLX CMC CMCO CMCSA CMG CMLS CMO CMS CMTL CNA CNBKA CNC CNMD CNO CNOB CNP CNS CNSL COBZ COF COHR COHU COKE COL COLB CONE COO COR CORE CORR CORT COTY COWN CPF CPK CPS CPSI CPT CRAI CRAY CREE CRL CRM CRS CRUS CRVL CRY CSFL CSGP CSGS CSRA CSS CSX CTB CTBI CTG CTL CTRE CTS CTSH CTWS CTXS CUB CUBE CUBI CUTR CUZ CVBF CVCO CVG CVGI CVI CVLT CVS CVX CWT CXO CXW CYH CYNO CYS CYTK CZNC CZR D DAL DAN DBD DCI DCO DCOM DCT DDR DE DECK DEI DEL DFRG DFS DGAS DGI DGICA DGX DHI DHIL DHR DIN DIOD DIS DISCA DISCK DISH DJCO DK DLB DLR DO DOC DORM DRE DRH DRI DRQ DSPG DST DSW DTE DTLK DUK DX DXPE DY DYN EA EBAY EBF EBIO EBIX EBS EBSB EBTC ECHO ECOL ECPG ED EDE EDR EE EEFT EFSC EGBN EGOV EGP EHTH EIG EIGI EL ELLI ELS ELY EMCI EME EMN ENH ENS ENSG ENTA ENTG ENV ENZ EPAM EPM EPR EQIX EQR EQT EQY ERA ERIE ERII ES ESCA ESE ESL ESRT ESRX ESS ESSA ETFC ETH ETM ETR EV EVC EVER EVHC EVR EVTC EW EWBC EXAC EXAR EXC EXLS EXP EXPD EXPO EXR F FAF FARO FBC FBIZ FBNC FBNK FBP FC FCBC FCF FCN FCNCA FDEF FDML FDX FE FELE FFBC FFG FFIC FFIN FFKT FGL FHN FIBK FICO FII FINL FIS FISI FISV FITB FIX FIZZ FL FLIC FLIR FLS FLT FMBI FNB FNF FNGN FNHC FNLC FNSR FOE FORM FOSL FOX FOXA FOXF FPRX FR FRBK FRGI FRME FRSH FRT FSLR FSP FSS FTNT FUL FULT FWRD GABC GAIA GBCI GBNK GBX GCAP GCI GCO GEF GEO GERN GFF GGG GGP GHL GILD GIMO GLT GLW GM GME GMED GNE GNRC GNTX GPC GPN GPS GRC GRPN GRUB GS GSAT GSBC GSIT GT GTLS GTN GTS GTT GWR GWRE GXP H HA HAE HAFC HALL HAR HAS HASI HBAN HBCP HBHC HCI HCKT HCOM HCP HD HDNG HE HEI HELE HF HFC HFWA HHC HIG HIIQ HIL HIW HLF HMN HMST HMSY HMTV HNI HOG HOLX HOMB HON HP HPT HR HRC HRL HRS HRTG HSIC HSII HST HT HTA HTBI HTBK HTH HTLD HTLF HUBG HUM HURC HURN HVT HW HWCC HXL HY IART IBCP IBKC IBKR IBOC IBTX ICFI ICUI IDA IDCC IDT IDTI IDXX IEX IHC III IIVI ILMN IMMR INCY INDB INFI INFN INGN INN INSY INT INTC INTU INVN INWK IP IPAR IPCC IPG IPGP IPHI IPXL IQNT IRDM IRET IRM ISBC ISCA ISIL ISLE ISRG ISRL ISSC IT ITG ITIC ITRI ITT IVR IVZ JACK JAKK JBHT JBL JBLU JCOM JJSF JKHY JLL JNJ JNS JOE JONE JOUT JPM JWN KBH KCG KELYA KEY KFRC KFY KIM KLAC KMI KMPR KNX KODK KRA KRC KRG KRNY KS KSU KVHI L LADR LAMR LBAI LCI LCNB LDL LDOS LE LEA LFUS LFVN LGND LH LHCG LHO LII LION LKFN LLL LLTC LLY LM LMNX LMOS LNC LNCE LNDC LNN LNT LOCK LOGM LOW LPG LPNT LQ LRCX LSTR LTC LUK LUV LVS LXP MA MAC MAN MANH MANT MAR MASI MAT MBFI MBI MBWM MC MCBC MCD MCHP MCHX MCK MCRI MCY MDC MDP MDR MDRX MDSO MDXG MEI MET MFA MG MGM MGRC MHK MHO MINI MITK MITT MKL MKSI MKTX MLAB MLR MMC MMI MMM MMS MMSI MNR MNST MO MOD MOFG MOH MORN MOV MPAA MPC MPW MPWR MRK MRLN MRTN MS MSA MSCC MSCI MSEX MSFT MSL MSM MSTR MTB MTD MTG MTGE MTH MTSC MTSI MTW MTZ MU MXIM MYCC MYE MYGN MYL MYRG NANO NATI NATR NAVG NAVI NBHC NBTB NCI NCR NCS NDSN NEE NEOG NEWM NFBK NFLX NGHC NGS NHC NHI NI NICK NIHD NILE NJR NKE NKSH NLS NLY NMIH NNBR NNI NOC NP NPTN NRIM NRZ NSC NSIT NSM NSP NSR NTAP NTCT NTGR NTRI NTRS NUE NUS NUTR NUVA NVDA NVEC NVR NWBI NWE NWHM NWL NWLI NWN NWS NWSA NXST NYCB NYLD NYMT NYT O OB OCFC OCLR ODFL OFC OFG OFIX OGE OGS OHI OI OII OIS OKE OLBK OLP OMC OMCL OMI ONB OPK OPY ORA ORCL ORI ORIT OSIS OSK OSTK OSUR OTTR PACW PAHC PAY PAYC PB PBCT PBF PBH PBI PBPB PCAR PCG PCH PCRX PCYG PDCO PDFS PDLI PDM PEB PEBO PEG PEGA PETS PFE PFG PFIS PFS PFSI PGC PGNX PGR PGTI PHIIK PHM PJC PKE PKI PKY PLAB PLCE PLD PLKI PLOW PLPC PLPM PLT PLUS PLXS PMC PMT PNC PNFP PNK PNM PNW POL POR POWI POWL PPBI PPC PPG PPL PRA PRFT PRGS PRI PRIM PRK PRU PRXL PSA PSB PSTB PSX PTSI PWOD PWR PYPL PZN PZZA QADA QCOM QLYS QRVO QSII RAD RAI RAIL RAS RAVN RBC RBCAA RDC RDN RDNT RECN REGN REIS REXR RF RGA RGEN RH RHI RHP RJF RLGY RLI RLJ RM RMAX RMBS RMD RNST ROG ROIC ROK ROLL ROP ROST RP RPAI RPM RPT RPXC RRGB RRTS RS RSG RSO RTEC RTIX RTN RTRX RUTH RWT RYN SAFM SAFT SAIA SAIC SALM SAM SAMG SANM SASR SATS SAVE SBCF SBGI SBRA SBSI SCAI SCG SCHL SCHW SCS SCSC SCVL SEB SEIC SEMG SENEA SF SFBS SFLY SFNC SGA SHEN SHLM SHO SIGI SIGM SIR SIVB SJI SJM SJW SKT SKYW SLAB SLB SLG SLGN SLM SMCI SMP SMRT SMTC SNCR SNH SNPS SNV SNX SO SPA SPAR SPG SPR SPSC SPTN SPWR SRCE SRDX SRE SRI SSI SSNC SSP SSTK STAG STAR STBA STBZ STC STFC STI STJ STL STLD STMP STRT STT STWD SUI SUN SUP SUPN SWKS SWM SWX SXC SYBT SYK SYKE SYMC SYNA SYNT T TAP TAST TAX TBI TBNK TCBK TCO TDC TDS TDY TECD TECH TEN TER TESS TEX TFSL TFX TGNA THFF THG THO THRM TIF TILE TIPT TIS TIVO TJX TKR TMH TMHC TMK TMO TMP TMUS TNET TOL TOWR TPH TREC TREE TRGP TRK TRMB TRMK TRN TRR TRST TSC TSN TSS TTC TTEC TTEK TTGT TTMI TTWO TUP TWMC TWO TWX TXN TXRH TYL TYPE TZOO UAL UAM UBA UBNK UBNT UBSH UBSI UCBI UCFC UCP UCTT UDR UEIC UFCS UFPI UFPT UFS UGI UHS UHT UIHC ULTI UMBF UMPQ UNFI UNH UNM UNP URBN URI USAK USB USCR USM USNA UTEK UTHR UTL UTMD UTX UVE UVSP V VAC VAL VAR VDSI VG VIAB VICR VIVO VLO VLY VMW VNO VOXX VOYA VRNT VRSK VRTS VRTU VSAT VSEC VTR VVC VVI VVUS VZ WAB WABC WAFD WAGE WAIR WAL WASH WAT WBA WBS WCC WCG WCIC WDC WDR WEC WERN WETF WEX WFC WGL WGO WHG WIN WLH WM WNC WNR WR WRB WRE WRI WRLD WSBC WSBF WSFS WSR WTBA WTFC WTR WU WWE WY WYN WYNN XCRA XEL XLNX XNCR XOM XRAY XRX XXIA XYL Y YDKN YORW YUM ZGNX ZION ZIXI ZLTQ ZOES ZTS 
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}28}]:} \PY{n}{corr\PYZus{}coef\PYZus{}CN} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{UniG}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{eattr} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                 \PY{n}{corr\PYZus{}coef\PYZus{}CN}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{corr}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}34}]:} \PY{n}{corr\PYZus{}coef\PYZus{}CN\PYZus{}DiG} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{DiUnwtG}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{n+nb}{print}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{n}{S1} \PY{o}{=} \PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return}\PY{p}{[}\PY{n}{n}\PY{p}{]}
             \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{\PYZus{}} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                 \PY{n}{S2} \PY{o}{=} \PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return}\PY{p}{[}\PY{n}{nbr}\PY{p}{]}
                 \PY{n}{corr\PYZus{}coef\PYZus{}CN\PYZus{}DiG}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{S1}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{n}{S2}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
A AAL AAN AAOI AAON AAPL AAT AAWW ABAX ABBV ABC ABCB ABCO ABMD ABT ACC ACET ACHC ACHN ACIW ACLS ACM ACOR ACRE ACXM ADBE ADC ADI ADP ADS ADTN ADUS AE AEE AEGN AEIS AEL AEO AEP AEPI AET AFG AFH AFL AFSI AGCO AGM AGNC AGTC AHP AHT AI AIG AIMC AIN AIZ AJG AKAM AKR AKRX AL ALB ALE ALEX ALG ALGN ALGT ALK ALL ALOG ALSN ALX ALXN AMAG AMAT AMBA AMCX AME AMED AMG AMGN AMKR AMNB AMP AMSF AMSWA AMT AMTD AMZN ANAT ANCX ANF ANH ANIK ANIP ANSS ANTM AOSL AP APAM APH APOG ARCB ARE ARI ARII AROW ARRS ARRY ARTNA ARW ASGN ASTE ATHN ATLO ATNI ATO ATR ATRI ATRO ATSG ATVI AVA AVAV AVB AVGO AVHI AVT AWI AWK AWR AXE AXL AYR BA BABY BAC BAH BANC BANF BANR BAX BBGI BBRG BBSI BBT BBW BCEI BCO BDC BDGE BDN BDX BEAT BELFB BEN BERY BFAM BFIN BFS BH BHB BHE BHLB BID BIIB BIO BJRI BK BKE BKH BKMU BKU BLDR BLK BLKB BLL BLMN BMI BMRC BMTC BMY BNCL BNCN BOFI BOH BOKF BPFH BPOP BR BREW BRKL BRKR BRKS BRO BSET BSFT BSRR BSTC BSX BTX BUSE BWA BWINB BXP BYD BZH C CA CAC CACC CACI CAH CAKE CAMP CASH CASS CAT CATM CATO CATY CBK CBL CBM CBRL CBS CBSH CBU CBZ CCBG CCI CCK CCMP CCNE CCRN CDNS CDR CEB CECE CELG CERN CEVA CFFI CFFN CFG CFNB CFR CFX CGNX CHCO CHDN CHE CHEF CHFC CHFN CHMG CHRW CHS CHSP CHTR CHUY CI CIA CIEN CIM CINF CIT CLC CLCT CLD CLDT CLFD CLGX CLI CLMS CLNY CLW CLX CMC CMCO CMCSA CMG CMLS CMO CMS CMTL CNA CNBKA CNC CNMD CNO CNOB CNP CNS CNSL COBZ COF COHR COHU COKE COL COLB CONE COO COR CORE CORR CORT COTY COWN CPF CPK CPS CPSI CPT CRAI CRAY CREE CRL CRM CRS CRUS CRVL CRY CSFL CSGP CSGS CSRA CSS CSX CTB CTBI CTG CTL CTRE CTS CTSH CTWS CTXS CUB CUBE CUBI CUTR CUZ CVBF CVCO CVG CVGI CVI CVLT CVS CVX CWT CXO CXW CYH CYNO CYS CYTK CZNC CZR D DAL DAN DBD DCI DCO DCOM DCT DDR DE DECK DEI DEL DFRG DFS DGAS DGI DGICA DGX DHI DHIL DHR DIN DIOD DIS DISCA DISCK DISH DJCO DK DLB DLR DO DOC DORM DRE DRH DRI DRQ DSPG DST DSW DTE DTLK DUK DX DXPE DY DYN EA EBAY EBF EBIO EBIX EBS EBSB EBTC ECHO ECOL ECPG ED EDE EDR EE EEFT EFSC EGBN EGOV EGP EHTH EIG EIGI EL ELLI ELS ELY EMCI EME EMN ENH ENS ENSG ENTA ENTG ENV ENZ EPAM EPM EPR EQIX EQR EQT EQY ERA ERIE ERII ES ESCA ESE ESL ESRT ESRX ESS ESSA ETFC ETH ETM ETR EV EVC EVER EVHC EVR EVTC EW EWBC EXAC EXAR EXC EXLS EXP EXPD EXPO EXR F FAF FARO FBC FBIZ FBNC FBNK FBP FC FCBC FCF FCN FCNCA FDEF FDML FDX FE FELE FFBC FFG FFIC FFIN FFKT FGL FHN FIBK FICO FII FINL FIS FISI FISV FITB FIX FIZZ FL FLIC FLIR FLS FLT FMBI FNB FNF FNGN FNHC FNLC FNSR FOE FORM FOSL FOX FOXA FOXF FPRX FR FRBK FRGI FRME FRSH FRT FSLR FSP FSS FTNT FUL FULT FWRD GABC GAIA GBCI GBNK GBX GCAP GCI GCO GEF GEO GERN GFF GGG GGP GHL GILD GIMO GLT GLW GM GME GMED GNE GNRC GNTX GPC GPN GPS GRC GRPN GRUB GS GSAT GSBC GSIT GT GTLS GTN GTS GTT GWR GWRE GXP H HA HAE HAFC HALL HAR HAS HASI HBAN HBCP HBHC HCI HCKT HCOM HCP HD HDNG HE HEI HELE HF HFC HFWA HHC HIG HIIQ HIL HIW HLF HMN HMST HMSY HMTV HNI HOG HOLX HOMB HON HP HPT HR HRC HRL HRS HRTG HSIC HSII HST HT HTA HTBI HTBK HTH HTLD HTLF HUBG HUM HURC HURN HVT HW HWCC HXL HY IART IBCP IBKC IBKR IBOC IBTX ICFI ICUI IDA IDCC IDT IDTI IDXX IEX IHC III IIVI ILMN IMMR INCY INDB INFI INFN INGN INN INSY INT INTC INTU INVN INWK IP IPAR IPCC IPG IPGP IPHI IPXL IQNT IRDM IRET IRM ISBC ISCA ISIL ISLE ISRG ISRL ISSC IT ITG ITIC ITRI ITT IVR IVZ JACK JAKK JBHT JBL JBLU JCOM JJSF JKHY JLL JNJ JNS JOE JONE JOUT JPM JWN KBH KCG KELYA KEY KFRC KFY KIM KLAC KMI KMPR KNX KODK KRA KRC KRG KRNY KS KSU KVHI L LADR LAMR LBAI LCI LCNB LDL LDOS LE LEA LFUS LFVN LGND LH LHCG LHO LII LION LKFN LLL LLTC LLY LM LMNX LMOS LNC LNCE LNDC LNN LNT LOCK LOGM LOW LPG LPNT LQ LRCX LSTR LTC LUK LUV LVS LXP MA MAC MAN MANH MANT MAR MASI MAT MBFI MBI MBWM MC MCBC MCD MCHP MCHX MCK MCRI MCY MDC MDP MDR MDRX MDSO MDXG MEI MET MFA MG MGM MGRC MHK MHO MINI MITK MITT MKL MKSI MKTX MLAB MLR MMC MMI MMM MMS MMSI MNR MNST MO MOD MOFG MOH MORN MOV MPAA MPC MPW MPWR MRK MRLN MRTN MS MSA MSCC MSCI MSEX MSFT MSL MSM MSTR MTB MTD MTG MTGE MTH MTSC MTSI MTW MTZ MU MXIM MYCC MYE MYGN MYL MYRG NANO NATI NATR NAVG NAVI NBHC NBTB NCI NCR NCS NDSN NEE NEOG NEWM NFBK NFLX NGHC NGS NHC NHI NI NICK NIHD NILE NJR NKE NKSH NLS NLY NMIH NNBR NNI NOC NP NPTN NRIM NRZ NSC NSIT NSM NSP NSR NTAP NTCT NTGR NTRI NTRS NUE NUS NUTR NUVA NVDA NVEC NVR NWBI NWE NWHM NWL NWLI NWN NWS NWSA NXST NYCB NYLD NYMT NYT O OB OCFC OCLR ODFL OFC OFG OFIX OGE OGS OHI OI OII OIS OKE OLBK OLP OMC OMCL OMI ONB OPK OPY ORA ORCL ORI ORIT OSIS OSK OSTK OSUR OTTR PACW PAHC PAY PAYC PB PBCT PBF PBH PBI PBPB PCAR PCG PCH PCRX PCYG PDCO PDFS PDLI PDM PEB PEBO PEG PEGA PETS PFE PFG PFIS PFS PFSI PGC PGNX PGR PGTI PHIIK PHM PJC PKE PKI PKY PLAB PLCE PLD PLKI PLOW PLPC PLPM PLT PLUS PLXS PMC PMT PNC PNFP PNK PNM PNW POL POR POWI POWL PPBI PPC PPG PPL PRA PRFT PRGS PRI PRIM PRK PRU PRXL PSA PSB PSTB PSX PTSI PWOD PWR PYPL PZN PZZA QADA QCOM QLYS QRVO QSII RAD RAI RAIL RAS RAVN RBC RBCAA RDC RDN RDNT RECN REGN REIS REXR RF RGA RGEN RH RHI RHP RJF RLGY RLI RLJ RM RMAX RMBS RMD RNST ROG ROIC ROK ROLL ROP ROST RP RPAI RPM RPT RPXC RRGB RRTS RS RSG RSO RTEC RTIX RTN RTRX RUTH RWT RYN SAFM SAFT SAIA SAIC SALM SAM SAMG SANM SASR SATS SAVE SBCF SBGI SBRA SBSI SCAI SCG SCHL SCHW SCS SCSC SCVL SEB SEIC SEMG SENEA SF SFBS SFLY SFNC SGA SHEN SHLM SHO SIGI SIGM SIR SIVB SJI SJM SJW SKT SKYW SLAB SLB SLG SLGN SLM SMCI SMP SMRT SMTC SNCR SNH SNPS SNV SNX SO SPA SPAR SPG SPR SPSC SPTN SPWR SRCE SRDX SRE SRI SSI SSNC SSP SSTK STAG STAR STBA STBZ STC STFC STI STJ STL STLD STMP STRT STT STWD SUI SUN SUP SUPN SWKS SWM SWX SXC SYBT SYK SYKE SYMC SYNA SYNT T TAP TAST TAX TBI TBNK TCBK TCO TDC TDS TDY TECD TECH TEN TER TESS TEX TFSL TFX TGNA THFF THG THO THRM TIF TILE TIPT TIS TIVO TJX TKR TMH TMHC TMK TMO TMP TMUS TNET TOL TOWR TPH TREC TREE TRGP TRK TRMB TRMK TRN TRR TRST TSC TSN TSS TTC TTEC TTEK TTGT TTMI TTWO TUP TWMC TWO TWX TXN TXRH TYL TYPE TZOO UAL UAM UBA UBNK UBNT UBSH UBSI UCBI UCFC UCP UCTT UDR UEIC UFCS UFPI UFPT UFS UGI UHS UHT UIHC ULTI UMBF UMPQ UNFI UNH UNM UNP URBN URI USAK USB USCR USM USNA UTEK UTHR UTL UTMD UTX UVE UVSP V VAC VAL VAR VDSI VG VIAB VICR VIVO VLO VLY VMW VNO VOXX VOYA VRNT VRSK VRTS VRTU VSAT VSEC VTR VVC VVI VVUS VZ WAB WABC WAFD WAGE WAIR WAL WASH WAT WBA WBS WCC WCG WCIC WDC WDR WEC WERN WETF WEX WFC WGL WGO WHG WIN WLH WM WNC WNR WR WRB WRE WRI WRLD WSBC WSBF WSFS WSR WTBA WTFC WTR WU WWE WY WYN WYNN XCRA XEL XLNX XNCR XOM XRAY XRX XXIA XYL Y YDKN YORW YUM ZGNX ZION ZIXI ZLTQ ZOES ZTS 
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}21}]:} \PY{n}{direct\PYZus{}requirements\PYZus{}CN} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         \PY{n}{direct\PYZus{}demands\PYZus{}CN} \PY{o}{=} \PY{p}{[}\PY{p}{]}
         \PY{n}{a} \PY{o}{=} \PY{k+kc}{None}
         \PY{k}{for} \PY{n}{n}\PY{p}{,} \PY{n}{nbrs} \PY{o+ow}{in} \PY{n}{UniG}\PY{o}{.}\PY{n}{adj}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
             \PY{n+nb}{print}\PY{p}{(}\PY{n}{n}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
             \PY{k}{for} \PY{n}{nbr}\PY{p}{,} \PY{n}{eattr} \PY{o+ow}{in} \PY{n}{nbrs}\PY{o}{.}\PY{n}{items}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                 \PY{k}{if} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}requirement}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{eattr}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                     \PY{n}{direct\PYZus{}requirements\PYZus{}CN}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}requirement}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
                 \PY{k}{if} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}demand}\PY{l+s+s1}{\PYZsq{}} \PY{o+ow}{in} \PY{n}{eattr}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                     \PY{n}{direct\PYZus{}demands\PYZus{}CN}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{eattr}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{direct\PYZus{}demand}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
A AAL AAN AAOI AAON AAPL AAT AAWW ABAX ABBV ABC ABCB ABCO ABMD ABT ACC ACET ACHC ACHN ACIW ACLS ACM ACOR ACRE ACXM ADBE ADC ADI ADP ADS ADTN ADUS AE AEE AEGN AEIS AEL AEO AEP AEPI AET AFG AFH AFL AFSI AGCO AGM AGNC AGTC AHP AHT AI AIG AIMC AIN AIZ AJG AKAM AKR AKRX AL ALB ALE ALEX ALG ALGN ALGT ALK ALL ALOG ALSN ALX ALXN AMAG AMAT AMBA AMCX AME AMED AMG AMGN AMKR AMNB AMP AMSF AMSWA AMT AMTD AMZN ANAT ANCX ANF ANH ANIK ANIP ANSS ANTM AOSL AP APAM APH APOG ARCB ARE ARI ARII AROW ARRS ARRY ARTNA ARW ASGN ASTE ATHN ATLO ATNI ATO ATR ATRI ATRO ATSG ATVI AVA AVAV AVB AVGO AVHI AVT AWI AWK AWR AXE AXL AYR BA BABY BAC BAH BANC BANF BANR BAX BBGI BBRG BBSI BBT BBW BCEI BCO BDC BDGE BDN BDX BEAT BELFB BEN BERY BFAM BFIN BFS BH BHB BHE BHLB BID BIIB BIO BJRI BK BKE BKH BKMU BKU BLDR BLK BLKB BLL BLMN BMI BMRC BMTC BMY BNCL BNCN BOFI BOH BOKF BPFH BPOP BR BREW BRKL BRKR BRKS BRO BSET BSFT BSRR BSTC BSX BTX BUSE BWA BWINB BXP BYD BZH C CA CAC CACC CACI CAH CAKE CAMP CASH CASS CAT CATM CATO CATY CBK CBL CBM CBRL CBS CBSH CBU CBZ CCBG CCI CCK CCMP CCNE CCRN CDNS CDR CEB CECE CELG CERN CEVA CFFI CFFN CFG CFNB CFR CFX CGNX CHCO CHDN CHE CHEF CHFC CHFN CHMG CHRW CHS CHSP CHTR CHUY CI CIA CIEN CIM CINF CIT CLC CLCT CLD CLDT CLFD CLGX CLI CLMS CLNY CLW CLX CMC CMCO CMCSA CMG CMLS CMO CMS CMTL CNA CNBKA CNC CNMD CNO CNOB CNP CNS CNSL COBZ COF COHR COHU COKE COL COLB CONE COO COR CORE CORR CORT COTY COWN CPF CPK CPS CPSI CPT CRAI CRAY CREE CRL CRM CRS CRUS CRVL CRY CSFL CSGP CSGS CSRA CSS CSX CTB CTBI CTG CTL CTRE CTS CTSH CTWS CTXS CUB CUBE CUBI CUTR CUZ CVBF CVCO CVG CVGI CVI CVLT CVS CVX CWT CXO CXW CYH CYNO CYS CYTK CZNC CZR D DAL DAN DBD DCI DCO DCOM DCT DDR DE DECK DEI DEL DFRG DFS DGAS DGI DGICA DGX DHI DHIL DHR DIN DIOD DIS DISCA DISCK DISH DJCO DK DLB DLR DO DOC DORM DRE DRH DRI DRQ DSPG DST DSW DTE DTLK DUK DX DXPE DY DYN EA EBAY EBF EBIO EBIX EBS EBSB EBTC ECHO ECOL ECPG ED EDE EDR EE EEFT EFSC EGBN EGOV EGP EHTH EIG EIGI EL ELLI ELS ELY EMCI EME EMN ENH ENS ENSG ENTA ENTG ENV ENZ EPAM EPM EPR EQIX EQR EQT EQY ERA ERIE ERII ES ESCA ESE ESL ESRT ESRX ESS ESSA ETFC ETH ETM ETR EV EVC EVER EVHC EVR EVTC EW EWBC EXAC EXAR EXC EXLS EXP EXPD EXPO EXR F FAF FARO FBC FBIZ FBNC FBNK FBP FC FCBC FCF FCN FCNCA FDEF FDML FDX FE FELE FFBC FFG FFIC FFIN FFKT FGL FHN FIBK FICO FII FINL FIS FISI FISV FITB FIX FIZZ FL FLIC FLIR FLS FLT FMBI FNB FNF FNGN FNHC FNLC FNSR FOE FORM FOSL FOX FOXA FOXF FPRX FR FRBK FRGI FRME FRSH FRT FSLR FSP FSS FTNT FUL FULT FWRD GABC GAIA GBCI GBNK GBX GCAP GCI GCO GEF GEO GERN GFF GGG GGP GHL GILD GIMO GLT GLW GM GME GMED GNE GNRC GNTX GPC GPN GPS GRC GRPN GRUB GS GSAT GSBC GSIT GT GTLS GTN GTS GTT GWR GWRE GXP H HA HAE HAFC HALL HAR HAS HASI HBAN HBCP HBHC HCI HCKT HCOM HCP HD HDNG HE HEI HELE HF HFC HFWA HHC HIG HIIQ HIL HIW HLF HMN HMST HMSY HMTV HNI HOG HOLX HOMB HON HP HPT HR HRC HRL HRS HRTG HSIC HSII HST HT HTA HTBI HTBK HTH HTLD HTLF HUBG HUM HURC HURN HVT HW HWCC HXL HY IART IBCP IBKC IBKR IBOC IBTX ICFI ICUI IDA IDCC IDT IDTI IDXX IEX IHC III IIVI ILMN IMMR INCY INDB INFI INFN INGN INN INSY INT INTC INTU INVN INWK IP IPAR IPCC IPG IPGP IPHI IPXL IQNT IRDM IRET IRM ISBC ISCA ISIL ISLE ISRG ISRL ISSC IT ITG ITIC ITRI ITT IVR IVZ JACK JAKK JBHT JBL JBLU JCOM JJSF JKHY JLL JNJ JNS JOE JONE JOUT JPM JWN KBH KCG KELYA KEY KFRC KFY KIM KLAC KMI KMPR KNX KODK KRA KRC KRG KRNY KS KSU KVHI L LADR LAMR LBAI LCI LCNB LDL LDOS LE LEA LFUS LFVN LGND LH LHCG LHO LII LION LKFN LLL LLTC LLY LM LMNX LMOS LNC LNCE LNDC LNN LNT LOCK LOGM LOW LPG LPNT LQ LRCX LSTR LTC LUK LUV LVS LXP MA MAC MAN MANH MANT MAR MASI MAT MBFI MBI MBWM MC MCBC MCD MCHP MCHX MCK MCRI MCY MDC MDP MDR MDRX MDSO MDXG MEI MET MFA MG MGM MGRC MHK MHO MINI MITK MITT MKL MKSI MKTX MLAB MLR MMC MMI MMM MMS MMSI MNR MNST MO MOD MOFG MOH MORN MOV MPAA MPC MPW MPWR MRK MRLN MRTN MS MSA MSCC MSCI MSEX MSFT MSL MSM MSTR MTB MTD MTG MTGE MTH MTSC MTSI MTW MTZ MU MXIM MYCC MYE MYGN MYL MYRG NANO NATI NATR NAVG NAVI NBHC NBTB NCI NCR NCS NDSN NEE NEOG NEWM NFBK NFLX NGHC NGS NHC NHI NI NICK NIHD NILE NJR NKE NKSH NLS NLY NMIH NNBR NNI NOC NP NPTN NRIM NRZ NSC NSIT NSM NSP NSR NTAP NTCT NTGR NTRI NTRS NUE NUS NUTR NUVA NVDA NVEC NVR NWBI NWE NWHM NWL NWLI NWN NWS NWSA NXST NYCB NYLD NYMT NYT O OB OCFC OCLR ODFL OFC OFG OFIX OGE OGS OHI OI OII OIS OKE OLBK OLP OMC OMCL OMI ONB OPK OPY ORA ORCL ORI ORIT OSIS OSK OSTK OSUR OTTR PACW PAHC PAY PAYC PB PBCT PBF PBH PBI PBPB PCAR PCG PCH PCRX PCYG PDCO PDFS PDLI PDM PEB PEBO PEG PEGA PETS PFE PFG PFIS PFS PFSI PGC PGNX PGR PGTI PHIIK PHM PJC PKE PKI PKY PLAB PLCE PLD PLKI PLOW PLPC PLPM PLT PLUS PLXS PMC PMT PNC PNFP PNK PNM PNW POL POR POWI POWL PPBI PPC PPG PPL PRA PRFT PRGS PRI PRIM PRK PRU PRXL PSA PSB PSTB PSX PTSI PWOD PWR PYPL PZN PZZA QADA QCOM QLYS QRVO QSII RAD RAI RAIL RAS RAVN RBC RBCAA RDC RDN RDNT RECN REGN REIS REXR RF RGA RGEN RH RHI RHP RJF RLGY RLI RLJ RM RMAX RMBS RMD RNST ROG ROIC ROK ROLL ROP ROST RP RPAI RPM RPT RPXC RRGB RRTS RS RSG RSO RTEC RTIX RTN RTRX RUTH RWT RYN SAFM SAFT SAIA SAIC SALM SAM SAMG SANM SASR SATS SAVE SBCF SBGI SBRA SBSI SCAI SCG SCHL SCHW SCS SCSC SCVL SEB SEIC SEMG SENEA SF SFBS SFLY SFNC SGA SHEN SHLM SHO SIGI SIGM SIR SIVB SJI SJM SJW SKT SKYW SLAB SLB SLG SLGN SLM SMCI SMP SMRT SMTC SNCR SNH SNPS SNV SNX SO SPA SPAR SPG SPR SPSC SPTN SPWR SRCE SRDX SRE SRI SSI SSNC SSP SSTK STAG STAR STBA STBZ STC STFC STI STJ STL STLD STMP STRT STT STWD SUI SUN SUP SUPN SWKS SWM SWX SXC SYBT SYK SYKE SYMC SYNA SYNT T TAP TAST TAX TBI TBNK TCBK TCO TDC TDS TDY TECD TECH TEN TER TESS TEX TFSL TFX TGNA THFF THG THO THRM TIF TILE TIPT TIS TIVO TJX TKR TMH TMHC TMK TMO TMP TMUS TNET TOL TOWR TPH TREC TREE TRGP TRK TRMB TRMK TRN TRR TRST TSC TSN TSS TTC TTEC TTEK TTGT TTMI TTWO TUP TWMC TWO TWX TXN TXRH TYL TYPE TZOO UAL UAM UBA UBNK UBNT UBSH UBSI UCBI UCFC UCP UCTT UDR UEIC UFCS UFPI UFPT UFS UGI UHS UHT UIHC ULTI UMBF UMPQ UNFI UNH UNM UNP URBN URI USAK USB USCR USM USNA UTEK UTHR UTL UTMD UTX UVE UVSP V VAC VAL VAR VDSI VG VIAB VICR VIVO VLO VLY VMW VNO VOXX VOYA VRNT VRSK VRTS VRTU VSAT VSEC VTR VVC VVI VVUS VZ WAB WABC WAFD WAGE WAIR WAL WASH WAT WBA WBS WCC WCG WCIC WDC WDR WEC WERN WETF WEX WFC WGL WGO WHG WIN WLH WM WNC WNR WR WRB WRE WRI WRLD WSBC WSBF WSFS WSR WTBA WTFC WTR WU WWE WY WYN WYNN XCRA XEL XLNX XNCR XOM XRAY XRX XXIA XYL Y YDKN YORW YUM ZGNX ZION ZIXI ZLTQ ZOES ZTS 
    \end{Verbatim}

    {[}Figure{]} shows the distribution of the correlation coefficients
based on the close price data in the year of 2016. It can be seen that
this plot has a shape similar to the t-distribution with a mean of
0.265. Most coefficients are at the interval of {[}-0.1, 0.7{]}, and all
of them are larger than -0.6868.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}31}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{corr\PYZus{}coef\PYZus{}CN}\PY{p}{,} \PY{n}{density}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{200}\PY{p}{,} \PY{n}{histtype}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bar}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mf}{0.35}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mf}{3.1}\PY{p}{]}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}axis([xmin,xmax,ymin,ymax])}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{correlation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p(correlation)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{correlation coefficient distribution}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}31}]:} Text(0.5,1,'correlation coefficient distribution')
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_42_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{corr\PYZus{}coef\PYZus{}CN\PYZus{}DiG}\PY{p}{,} \PY{n}{density}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{200}\PY{p}{,} \PY{n}{histtype}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bar}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mf}{0.35}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mf}{3.1}\PY{p}{]}\PY{p}{)}
         \PY{c+c1}{\PYZsh{}axis([xmin,xmax,ymin,ymax])}
         \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{correlation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p(correlation)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
         \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{correlation coefficient distribution}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}35}]:} Text(0.5,1,'correlation coefficient distribution')
\end{Verbatim}
            
    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_43_1.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{complete\PYZus{}corr\PYZus{}coef\PYZus{}CN} \PY{o}{=} \PY{p}{[}\PY{k+kc}{None}\PY{p}{]} \PY{o}{*} \PY{n}{LENTRGL}
        \PY{n}{cnt} \PY{o}{=} \PY{l+m+mi}{0}
        \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{LENTCKR}\PY{p}{)}\PY{p}{:}
            \PY{n}{S1} \PY{o}{=} \PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return}\PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]}
            \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{i}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{LENTCKR}\PY{p}{)}\PY{p}{:}
                \PY{n}{S2} \PY{o}{=} \PY{n}{df\PYZus{}stock\PYZus{}normal\PYZus{}return}\PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{]}
                \PY{n}{complete\PYZus{}corr\PYZus{}coef\PYZus{}CN}\PY{p}{[}\PY{n}{cnt}\PY{p}{]} \PY{o}{=} \PY{n}{S1}\PY{o}{.}\PY{n}{corr}\PY{p}{(}\PY{n}{S2}\PY{p}{)}
                \PY{n}{cnt} \PY{o}{+}\PY{o}{=} \PY{l+m+mi}{1}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{plt}\PY{o}{.}\PY{n}{hist}\PY{p}{(}\PY{n}{complete\PYZus{}corr\PYZus{}coef\PYZus{}CN}\PY{p}{,} \PY{n}{density}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{,} \PY{n}{bins}\PY{o}{=}\PY{l+m+mi}{200}\PY{p}{,} \PY{n}{histtype}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{bar}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{axis}\PY{p}{(}\PY{p}{[}\PY{o}{\PYZhy{}}\PY{l+m+mf}{0.35}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mf}{3.1}\PY{p}{]}\PY{p}{)}
        \PY{c+c1}{\PYZsh{}axis([xmin,xmax,ymin,ymax])}
        \PY{n}{plt}\PY{o}{.}\PY{n}{xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{correlation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{p(correlation)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{correlation coefficient distribution}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{n}{describe}\PY{p}{(}\PY{n}{corr\PYZus{}coef\PYZus{}CN}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}36}]:} DescribeResult(nobs=1937304, minmax=(-0.6868084783629813, 0.9772224744852486), mean=0.26474010281270655, variance=0.0201240778829594, skewness=0.3439511297826952, kurtosis=0.7216782786160216)
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{n}{describe}\PY{p}{(}\PY{n}{corr\PYZus{}coef\PYZus{}CN\PYZus{}DiG}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}37}]:} DescribeResult(nobs=1216477, minmax=(-0.6868084783629813, 0.9772224744852486), mean=0.2748356697313223, variance=0.02232271498230952, skewness=0.3806809098595892, kurtosis=0.7416203457375179)
\end{Verbatim}
            
    \hypertarget{topological-properties-of-the-directed-unweighted-network}{%
\subsection{4. Topological Properties of the Directed Unweighted
Network}\label{topological-properties-of-the-directed-unweighted-network}}

    \hypertarget{degree-distribution}{%
\subsection{Degree distribution}\label{degree-distribution}}

    \hypertarget{connectedness}{%
\subsubsection{Connectedness}\label{connectedness}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}265}]:} \PY{n}{DiG\PYZus{}4}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}edges}\PY{p}{(}\PY{p}{)} \PY{o}{/} \PY{n}{DiG\PYZus{}4}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}265}]:} 66.53408179631114
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}356}]:} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{DiG\PYZus{}4}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}\PY{p}{:}
              \PY{k}{if} \PY{n}{DiG\PYZus{}4}\PY{o}{.}\PY{n}{degree}\PY{p}{(}\PY{n}{i}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{:}
                  \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
CATO DYN ECOL HDNG HRL NHC NSR PCYG RH TAX TZOO UNFI VOXX 
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}363}]:} \PY{n}{UndiG\PYZus{}4} \PY{o}{=} \PY{n}{DiG\PYZus{}4}\PY{o}{.}\PY{n}{to\PYZus{}undirected}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \hypertarget{small-world-property}{%
\subsection{Small world property}\label{small-world-property}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}384}]:} \PY{k}{def} \PY{n+nf}{calGlobalEfficiency}\PY{p}{(}\PY{n}{G}\PY{p}{)}\PY{p}{:}
              \PY{n}{N} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)}
              \PY{n}{lst\PYZus{}nodes} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}
              \PY{n}{acc} \PY{o}{=} \PY{l+m+mf}{0.0}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{lst\PYZus{}nodes}\PY{p}{:}
                  \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n}{lst\PYZus{}nodes}\PY{p}{:}
                      \PY{k}{if} \PY{n}{i} \PY{o}{!=} \PY{n}{j} \PY{o+ow}{and} \PY{n}{nx}\PY{o}{.}\PY{n}{has\PYZus{}path}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{)}\PY{p}{:}
                          \PY{n}{acc} \PY{o}{+}\PY{o}{=} \PY{l+m+mf}{1.0}\PY{o}{/}\PY{n}{nx}\PY{o}{.}\PY{n}{shortest\PYZus{}path\PYZus{}length}\PY{p}{(}\PY{n}{G}\PY{p}{,} \PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{)}
              \PY{k}{return} \PY{n}{acc}\PY{o}{/}\PY{n}{N}\PY{o}{/}\PY{p}{(}\PY{n}{N}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}
          
          \PY{k}{def} \PY{n+nf}{calLocalEfficiency}\PY{p}{(}\PY{n}{G}\PY{p}{)}\PY{p}{:}
              \PY{n}{UndiG} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{to\PYZus{}undirected}\PY{p}{(}\PY{p}{)}
              \PY{n}{lst\PYZus{}nodes} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{nodes}\PY{p}{(}\PY{p}{)}
              \PY{n}{acc} \PY{o}{=} \PY{l+m+mf}{0.0}
              \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{lst\PYZus{}nodes}\PY{p}{:}
                  \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                  \PY{n}{nodes\PYZus{}g} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{UndiG}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
                  \PY{n}{nodes\PYZus{}g}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{i}\PY{p}{)}
                  \PY{n}{acc} \PY{o}{+}\PY{o}{=} \PY{n}{calGlobalEfficiency}\PY{p}{(}\PY{n}{G}\PY{o}{.}\PY{n}{subgraph}\PY{p}{(}\PY{n}{nodes\PYZus{}g}\PY{p}{)}\PY{p}{)}
              \PY{k}{return} \PY{n}{acc}\PY{o}{/}\PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{glbEffc} \PY{o}{=} \PY{n}{calGlobalEfficiency}\PY{p}{(}\PY{n}{DiG\PYZus{}4}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}368}]:} \PY{n}{glbEffc}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}368}]:} 0.1486061381592153
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}386}]:} \PY{n}{locEffc} \PY{o}{=} \PY{n}{calLocalEfficiency}\PY{p}{(}\PY{n}{DiG\PYZus{}4}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
A AAL AAN AAOI AAON AAPL AAWW ABAX ABBV ABCB ABMD ABT ACET ACHC ACHN ACIW ACM ACOR ACRE ACXM ADBE ADI ADP ADS ADTN AE AEE AEGN AEIS AEL AEP AET AFG AFH AFL AGCO AGM AGNC AGTC AHT AI AIG AIMC AIN AIZ AJG AKAM AKR AKRX AL ALB ALE ALEX ALG ALGN ALGT ALK ALL ALOG ALSN ALXN AMAG AMAT AMBA AMCX AME AMED AMG AMGN AMKR AMNB AMP AMSF AMSWA AMT AMTD AMZN ANAT ANCX ANH ANIK ANIP ANSS ANTM AOSL AP APAM APH APOG ARCB ARE ARI ARII AROW ARRS ARRY ARW ASGN ASTE ATHN ATLO ATNI ATO ATR ATRO ATSG ATVI AVA AVAV AVGO AVHI AVT AWI AWK AXE AXL AYR BA BABY BAC BAH BANC BANF BANR BAX BBRG BBSI BBT BCEI BCO BDC BDGE BDN BDX BELFB BEN BERY BFAM BFIN BFS BH BHB BHE BHLB BID BIIB BIO BJRI BK BKE BKH BKMU BKU BLDR BLK BLKB BLL BLMN BMI BMRC BMTC BMY BNCL BNCN BOFI BOH BOKF BPFH BPOP BR BRKL BRKR BRKS BRO BSET BSFT BSRR BSTC BSX BTX BUSE BWA BWINB BXP BZH C CA CAC CACC CACI CAH CAKE CAMP CASH CASS CAT CATM CATO CATY CBL CBM CBRL CBS CBSH CBU CBZ CCBG CCK CCMP CCNE CCRN CDNS CEB CECE CELG CERN CEVA CFFN CFG CFR CFX CGNX CHCO CHDN CHE CHFC CHFN CHRW CHS CHSP CHTR CHUY CI CIA CIEN CIM CINF CIT CLC CLCT CLD CLDT CLFD CLGX CLI CLMS CLNY CLW CMC CMCO CMCSA CMO CMS CMTL CNA CNBKA CNC CNMD CNO CNOB CNP CNS CNSL COBZ COF COHR COHU COKE COL COLB COO CORR CORT COTY COWN CPF CPS CRAI CRAY CREE CRL CRM CRS CRUS CRVL CRY CSFL CSGP CSGS CSRA CSS CSX CTB CTBI CTL CTS CTSH CTWS CTXS CUB CUBI CUTR CUZ CVBF CVCO CVG CVGI CVI CVLT CVX CXO CYH CYNO CYS CYTK CZNC D DAL DAN DBD DCI DCO DCOM DCT DE DECK DEI DEL DFRG DFS DGI DGICA DGX DHI DHIL DHR DIN DIOD DIS DISCA DISCK DISH DK DLB DORM DRE DRH DRI DRQ DSPG DST DTE DUK DX DXPE DY DYN EA EBAY EBF EBIX EBS EBSB EBTC ECHO ECOL ECPG ED EE EEFT EFSC EGBN EGOV EGP EIG EIGI EL ELLI EMCI EME EMN ENS ENSG ENTA ENTG ENV EPAM EPM EQIX EQT ERA ERIE ERII ES ESE ESL ESRT ESRX ESSA ETFC ETH ETM ETR EV EVC EVER EVR EVTC EW EWBC EXAC EXAR EXC EXLS EXP EXPD EXPO F FAF FARO FBC FBIZ FBNC FBNK FBP FC FCBC FCF FCN FCNCA FDEF FDML FDX FE FELE FFBC FFG FFIC FFIN FFKT FHN FIBK FICO FII FINL FIS FISI FISV FITB FIX FL FLIC FLIR FLS FLT FMBI FNB FNF FNGN FNHC FNLC FNSR FOE FORM FOSL FOX FOXA FOXF FPRX FR FRBK FRME FRSH FSLR FSP FSS FTNT FUL FULT FWRD GABC GBCI GBNK GBX GCAP GCI GEF GERN GFF GGG GGP GHL GILD GIMO GLT GLW GM GME GMED GNRC GNTX GPC GPN GRC GRPN GRUB GS GSBC GT GTLS GTN GTS GTT GWR GWRE GXP HA HAE HAFC HALL HAR HAS HASI HBAN HBCP HBHC HCI HCKT HCOM HD HDNG HE HEI HELE HF HFC HFWA HHC HIG HIL HIW HLF HMN HMST HMSY HNI HOG HOLX HOMB HON HPT HRC HRL HRS HRTG HSIC HSII HST HT HTBI HTBK HTH HTLD HTLF HUBG HUM HURC HURN HVT HW HWCC HXL HY IART IBCP IBKC IBKR IBOC IBTX ICFI ICUI IDA IDCC IDTI IDXX IEX IHC IIVI ILMN IMMR INCY INDB INFN INGN INN INSY INT INTC INTU INVN INWK IP IPAR IPCC IPG IPGP IPHI IPXL IQNT IRDM IRET IRM ISBC ISCA ISIL ISRG IT ITG ITRI ITT IVR IVZ JACK JBHT JBL JBLU JCOM JJSF JKHY JLL JNJ JNS JOE JONE JPM KBH KCG KELYA KEY KFRC KFY KIM KLAC KMI KMPR KNX KODK KRA KRC KRG KRNY KS KSU KVHI L LADR LAMR LBAI LCI LCNB LDL LEA LFUS LGND LH LHCG LHO LII LION LKFN LLL LLTC LLY LM LMNX LMOS LNC LNCE LNDC LNN LOCK LOGM LOW LPG LPNT LQ LRCX LSTR LTC LUK LUV LXP MA MAC MAN MANH MANT MASI MBFI MBI MBWM MC MCBC MCD MCHP MCY MDC MDP MDR MDRX MDSO MDXG MEI MET MFA MGRC MHK MHO MINI MITT MKL MKSI MKTX MLAB MLR MMC MMI MMM MMS MMSI MO MOD MOFG MOH MORN MOV MPAA MPC MPW MPWR MRK MRLN MRTN MS MSA MSCC MSCI MSFT MSL MSM MSTR MTB MTD MTG MTGE MTH MTSC MTSI MTZ MU MXIM MYCC MYE MYGN MYL MYRG NANO NATI NAVG NAVI NBHC NBTB NCI NCR NCS NDSN NEE NEOG NEWM NFBK NGHC NHC NHI NI NILE NJR NKE NKSH NLY NMIH NNBR NNI NOC NP NPTN NRIM NRZ NSC NSIT NSM NSR NTAP NTCT NTGR NTRI NTRS NUE NUS NUVA NVDA NVEC NVR NWBI NWE NWHM NWL NWLI NWN NWS NWSA NXST NYCB NYLD NYMT NYT OB OCFC OCLR ODFL OFC OFG OFIX OGE OGS OI OIS OKE OLP OMC OMCL OMI ONB OPK OPY ORA ORCL ORI ORIT OSIS OSK OSTK OSUR OTTR PACW PAHC PAY PAYC PB PBCT PBF PBH PBI PBPB PCAR PCG PCH PCRX PCYG PDCO PDFS PDM PEB PEBO PEG PEGA PETS PFE PFG PFIS PFS PFSI PGC PGNX PGR PGTI PHM PJC PKE PKI PLAB PLD PLKI PLOW PLPC PLT PLUS PLXS PMC PNC PNFP PNM PNW POL POR POWI POWL PPBI PPC PPG PPL PRA PRFT PRGS PRI PRIM PRK PRU PRXL PSB PSTB PSX PTSI PWOD PWR PYPL PZN PZZA QADA QCOM QLYS QRVO RAI RAIL RAS RAVN RBC RBCAA RDN RDNT RECN REGN REIS REXR RF RGA RGEN RH RHI RHP RJF RLGY RLI RLJ RM RMAX RMBS RMD RNST ROG ROK ROLL ROP ROST RP RPM RPT RPXC RRGB RRTS RS RSG RTEC RTIX RTN RTRX RUTH RWT RYN SAFM SAFT SAIA SAIC SAMG SANM SASR SATS SAVE SBCF SBGI SBRA SBSI SCG SCHL SCHW SCS SCSC SEB SEIC SENEA SF SFBS SFNC SGA SHLM SIGI SIGM SIR SIVB SJI SJM SKT SKYW SLAB SLG SLGN SLM SMCI SMP SMTC SNCR SNPS SNV SNX SO SPA SPAR SPG SPR SPSC SPTN SPWR SRCE SRDX SRE SRI SSI SSNC SSP SSTK STAG STAR STBA STBZ STC STFC STI STJ STL STLD STMP STT STWD SUN SUP SUPN SWKS SWM SWX SXC SYBT SYK SYKE SYMC SYNA T TAP TAST TAX TBI TBNK TCBK TDC TDS TDY TECD TECH TEN TER TEX TFSL TFX TGNA THFF THG THO THRM TIF TILE TIPT TIS TIVO TJX TKR TMH TMHC TMK TMO TMP TMUS TNET TOL TOWR TPH TREC TREE TRGP TRK TRMB TRMK TRN TRR TRST TSC TSN TSS TTEC TTEK TTGT TTMI TTWO TUP TWO TWX TXN TXRH TYL TYPE TZOO UAL UAM UBNK UBNT UBSH UBSI UCBI UCFC UCTT UEIC UFCS UFPI UFS UGI UHS UHT UIHC ULTI UMBF UMPQ UNFI UNH UNM UNP URI USAK USB USCR USM USNA UTEK UTHR UTL UTX UVE UVSP V VAC VAR VDSI VG VIAB VICR VIVO VLO VLY VMW VNO VOXX VOYA VRNT VRSK VRTS VRTU VSAT VSEC VVC VVI VVUS VZ WAB WABC WAFD WAGE WAIR WAL WASH WAT WBA WBS WCC WCG WCIC WDC WDR WEC WERN WETF WEX WFC WGL WGO WHG WIN WLH WM WNC WNR WRB WRE WRI WRLD WSBC WSBF WSFS WSR WTBA WTFC WTR WU WWE WY XCRA XEL XLNX XNCR XOM XRAY XRX XXIA XYL Y YDKN ZGNX ZION ZIXI ZLTQ ZOES ZTS 
    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}388}]:} \PY{n}{locEffc}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}388}]:} 0.7465691741625827
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}297}]:} \PY{n}{nx}\PY{o}{.}\PY{n}{shortest\PYZus{}path\PYZus{}length}\PY{p}{(}\PY{n}{DiG\PYZus{}4}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{LMNX}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}297}]:} 3
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}302}]:} \PY{n}{nx}\PY{o}{.}\PY{n}{has\PYZus{}path}\PY{p}{(}\PY{n}{DiG\PYZus{}4}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{LMNX}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{MASI}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}302}]:} True
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}261}]:} \PY{n}{nx}\PY{o}{.}\PY{n}{average\PYZus{}shortest\PYZus{}path\PYZus{}length}\PY{p}{(}\PY{n}{DiG\PYZus{}4}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}261}]:} 1.4392184903479426
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}269}]:} \PY{n}{nx}\PY{o}{.}\PY{n}{average\PYZus{}clustering}\PY{p}{(}\PY{n}{DiG\PYZus{}4}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}269}]:} 0.5791134189676599
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{p}{[}\PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{out\PYZus{}degree} \PY{k}{if} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{==} \PY{n+nb}{sorted}\PY{p}{(}\PY{n}{lst\PYZus{}out\PYZus{}degree}\PY{p}{,} \PY{n}{reverse}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}93}]:} \PY{n}{nx}\PY{o}{.}\PY{n}{is\PYZus{}weakly\PYZus{}connected}\PY{p}{(}\PY{n}{UniG}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}93}]:} True
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}266}]:} \PY{n}{shortest\PYZus{}path} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{shortest\PYZus{}path}\PY{p}{(}\PY{n}{DiG\PYZus{}4}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}267}]:} \PY{n}{shortest\PYZus{}path}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{A}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}267}]:} \{'A': ['A'],
           'AAPL': ['A', 'AAPL'],
           'ACIW': ['A', 'ACIW'],
           'ADBE': ['A', 'ADBE'],
           'ADI': ['A', 'ADI'],
           'AEIS': ['A', 'AEIS'],
           'ALOG': ['A', 'ALOG'],
           'AMAT': ['A', 'AMAT'],
           'AMBA': ['A', 'AMBA'],
           'ANSS': ['A', 'ANSS'],
           'APH': ['A', 'APH'],
           'ARRS': ['A', 'ARRS'],
           'ATVI': ['A', 'ATVI'],
           'AVGO': ['A', 'AVGO'],
           'BA': ['A', 'BA'],
           'BABY': ['A', 'BABY'],
           'BHE': ['A', 'BHE'],
           'BIO': ['A', 'BIO'],
           'BLKB': ['A', 'BLKB'],
           'BRKR': ['A', 'BRKR'],
           'BSFT': ['A', 'BSFT'],
           'CA': ['A', 'CA'],
           'CBS': ['A', 'CBS'],
           'CCMP': ['A', 'CCMP'],
           'CDNS': ['A', 'CDNS'],
           'CGNX': ['A', 'CGNX'],
           'CHTR': ['A', 'CHTR'],
           'CIEN': ['A', 'CIEN'],
           'COHR': ['A', 'COHR'],
           'COHU': ['A', 'COHU'],
           'CRM': ['A', 'CRM'],
           'CRUS': ['A', 'CRUS'],
           'CTS': ['A', 'CTS'],
           'CTXS': ['A', 'CTXS'],
           'CVLT': ['A', 'CVLT'],
           'CYNO': ['A', 'CYNO'],
           'DHR': ['A', 'DHR'],
           'DIOD': ['A', 'DIOD'],
           'DIS': ['A', 'DIS'],
           'DISCA': ['A', 'DISCA'],
           'DISCK': ['A', 'DISCK'],
           'DISH': ['A', 'DISH'],
           'ESE': ['A', 'ESE'],
           'ESL': ['A', 'ESL'],
           'ETM': ['A', 'ETM'],
           'EVC': ['A', 'EVC'],
           'FLIR': ['A', 'FLIR'],
           'FNSR': ['A', 'FNSR'],
           'FOX': ['A', 'FOX'],
           'FOXA': ['A', 'FOXA'],
           'GTN': ['A', 'GTN'],
           'GWRE': ['A', 'GWRE'],
           'HAR': ['A', 'HAR'],
           'HAS': ['A', 'HAS'],
           'HOLX': ['A', 'HOLX'],
           'HRS': ['A', 'HRS'],
           'IART': ['A', 'IART'],
           'IDTI': ['A', 'IDTI'],
           'ILMN': ['A', 'ILMN'],
           'INTC': ['A', 'INTC'],
           'INTU': ['A', 'INTU'],
           'INVN': ['A', 'INVN'],
           'IPGP': ['A', 'IPGP'],
           'IPHI': ['A', 'IPHI'],
           'IRDM': ['A', 'IRDM'],
           'JBL': ['A', 'JBL'],
           'LOGM': ['A', 'LOGM'],
           'MANH': ['A', 'MANH'],
           'MASI': ['A', 'MASI'],
           'MCHP': ['A', 'MCHP'],
           'MDSO': ['A', 'MDSO'],
           'MEI': ['A', 'MEI'],
           'MKSI': ['A', 'MKSI'],
           'MPWR': ['A', 'MPWR'],
           'MSCC': ['A', 'MSCC'],
           'MSFT': ['A', 'MSFT'],
           'MTD': ['A', 'MTD'],
           'MTSI': ['A', 'MTSI'],
           'MU': ['A', 'MU'],
           'MXIM': ['A', 'MXIM'],
           'NATI': ['A', 'NATI'],
           'NTAP': ['A', 'NTAP'],
           'NTGR': ['A', 'NTGR'],
           'NXST': ['A', 'NXST'],
           'OMCL': ['A', 'OMCL'],
           'ORCL': ['A', 'ORCL'],
           'PAYC': ['A', 'PAYC'],
           'PKI': ['A', 'PKI'],
           'PLXS': ['A', 'PLXS'],
           'POWI': ['A', 'POWI'],
           'PRGS': ['A', 'PRGS'],
           'QCOM': ['A', 'QCOM'],
           'QRVO': ['A', 'QRVO'],
           'RMBS': ['A', 'RMBS'],
           'ROK': ['A', 'ROK'],
           'ROP': ['A', 'ROP'],
           'RP': ['A', 'RP'],
           'RTEC': ['A', 'RTEC'],
           'SATS': ['A', 'SATS'],
           'SBGI': ['A', 'SBGI'],
           'SGA': ['A', 'SGA'],
           'SLAB': ['A', 'SLAB'],
           'SMTC': ['A', 'SMTC'],
           'SNPS': ['A', 'SNPS'],
           'SPA': ['A', 'SPA'],
           'SSP': ['A', 'SSP'],
           'SWKS': ['A', 'SWKS'],
           'TDC': ['A', 'TDC'],
           'TDS': ['A', 'TDS'],
           'TDY': ['A', 'TDY'],
           'TER': ['A', 'TER'],
           'TGNA': ['A', 'TGNA'],
           'TMO': ['A', 'TMO'],
           'TMUS': ['A', 'TMUS'],
           'TRMB': ['A', 'TRMB'],
           'TTWO': ['A', 'TTWO'],
           'TXN': ['A', 'TXN'],
           'TYL': ['A', 'TYL'],
           'UBNT': ['A', 'UBNT'],
           'ULTI': ['A', 'ULTI'],
           'UTX': ['A', 'UTX'],
           'VAR': ['A', 'VAR'],
           'VICR': ['A', 'VICR'],
           'VMW': ['A', 'VMW'],
           'VSAT': ['A', 'VSAT'],
           'WAT': ['A', 'WAT'],
           'WDC': ['A', 'WDC'],
           'XCRA': ['A', 'XCRA'],
           'XLNX': ['A', 'XLNX'],
           'XXIA': ['A', 'XXIA'],
           'CMCSA': ['A', 'AAPL', 'CMCSA'],
           'ISIL': ['A', 'AAPL', 'ISIL'],
           'ADTN': ['A', 'ACIW', 'ADTN'],
           'AMKR': ['A', 'ACIW', 'AMKR'],
           'AMSWA': ['A', 'ACIW', 'AMSWA'],
           'ATNI': ['A', 'ACIW', 'ATNI'],
           'AVAV': ['A', 'ACIW', 'AVAV'],
           'BELFB': ['A', 'ACIW', 'BELFB'],
           'CAMP': ['A', 'ACIW', 'CAMP'],
           'CEVA': ['A', 'ACIW', 'CEVA'],
           'CLFD': ['A', 'ACIW', 'CLFD'],
           'CMTL': ['A', 'ACIW', 'CMTL'],
           'CNMD': ['A', 'ACIW', 'CNMD'],
           'CNSL': ['A', 'ACIW', 'CNSL'],
           'CUB': ['A', 'ACIW', 'CUB'],
           'EIGI': ['A', 'ACIW', 'EIGI'],
           'EXAR': ['A', 'ACIW', 'EXAR'],
           'FARO': ['A', 'ACIW', 'FARO'],
           'FORM': ['A', 'ACIW', 'FORM'],
           'FOSL': ['A', 'ACIW', 'FOSL'],
           'FSLR': ['A', 'ACIW', 'FSLR'],
           'GTT': ['A', 'ACIW', 'GTT'],
           'HEI': ['A', 'ACIW', 'HEI'],
           'HURC': ['A', 'ACIW', 'HURC'],
           'JCOM': ['A', 'ACIW', 'JCOM'],
           'KVHI': ['A', 'ACIW', 'KVHI'],
           'MLAB': ['A', 'ACIW', 'MLAB'],
           'MOV': ['A', 'ACIW', 'MOV'],
           'MSTR': ['A', 'ACIW', 'MSTR'],
           'MTSC': ['A', 'ACIW', 'MTSC'],
           'NANO': ['A', 'ACIW', 'NANO'],
           'NVDA': ['A', 'ACIW', 'NVDA'],
           'PKE': ['A', 'ACIW', 'PKE'],
           'PLT': ['A', 'ACIW', 'PLT'],
           'QADA': ['A', 'ACIW', 'QADA'],
           'QLYS': ['A', 'ACIW', 'QLYS'],
           'SANM': ['A', 'ACIW', 'SANM'],
           'SPSC': ['A', 'ACIW', 'SPSC'],
           'SPWR': ['A', 'ACIW', 'SPWR'],
           'SSNC': ['A', 'ACIW', 'SSNC'],
           'SYNA': ['A', 'ACIW', 'SYNA'],
           'UCTT': ['A', 'ACIW', 'UCTT'],
           'UEIC': ['A', 'ACIW', 'UEIC'],
           'WIN': ['A', 'ACIW', 'WIN'],
           'EA': ['A', 'ADBE', 'EA'],
           'ELLI': ['A', 'ADBE', 'ELLI'],
           'DSPG': ['A', 'ADI', 'DSPG'],
           'ITRI': ['A', 'ADI', 'ITRI'],
           'LLTC': ['A', 'ADI', 'LLTC'],
           'NPTN': ['A', 'ADI', 'NPTN'],
           'SMCI': ['A', 'ADI', 'SMCI'],
           'OCLR': ['A', 'AEIS', 'OCLR'],
           'SIGM': ['A', 'ALOG', 'SIGM'],
           'AAOI': ['A', 'AMAT', 'AAOI'],
           'AOSL': ['A', 'AMAT', 'AOSL'],
           'INFN': ['A', 'AMAT', 'INFN'],
           'CTL': ['A', 'ANSS', 'CTL'],
           'FOXF': ['A', 'ANSS', 'FOXF'],
           'LMOS': ['A', 'ANSS', 'LMOS'],
           'VG': ['A', 'ANSS', 'VG'],
           'HOG': ['A', 'APH', 'HOG'],
           'LLL': ['A', 'APH', 'LLL'],
           'TTMI': ['A', 'APH', 'TTMI'],
           'NOC': ['A', 'BA', 'NOC'],
           'RTN': ['A', 'BA', 'RTN'],
           'VZ': ['A', 'BHE', 'VZ'],
           'CRAY': ['A', 'BRKR', 'CRAY'],
           'SYMC': ['A', 'CA', 'SYMC'],
           'AMCX': ['A', 'CBS', 'AMCX'],
           'TWX': ['A', 'CBS', 'TWX'],
           'VIAB': ['A', 'CBS', 'VIAB'],
           'ISCA': ['A', 'CBS', 'ISCA'],
           'IQNT': ['A', 'COHR', 'IQNT'],
           'CUTR': ['A', 'CYNO', 'CUTR'],
           'ZLTQ': ['A', 'CYNO', 'ZLTQ'],
           'CREE': ['A', 'DIOD', 'CREE'],
           'PBPB': ['A', 'DIS', 'PBPB'],
           'TRK': ['A', 'DIS', 'TRK'],
           'WWE': ['A', 'DIS', 'WWE'],
           'CHDN': ['A', 'DISCA', 'CHDN'],
           'RUTH': ['A', 'ETM', 'RUTH'],
           'BJRI': ['A', 'EVC', 'BJRI'],
           'BLMN': ['A', 'EVC', 'BLMN'],
           'OSIS': ['A', 'HAR', 'OSIS'],
           'ABAX': ['A', 'MDSO', 'ABAX'],
           'STJ': ['A', 'NTGR', 'STJ'],
           'CAKE': ['A', 'NXST', 'CAKE'],
           'DRI': ['A', 'NXST', 'DRI'],
           'NVEC': ['A', 'NXST', 'NVEC'],
           'BMI': ['A', 'ORCL', 'BMI'],
           'USM': ['A', 'RP', 'USM'],
           'T': ['A', 'TDS', 'T'],
           'TXRH': ['A', 'TDS', 'TXRH'],
           'PLAB': ['A', 'TER', 'PLAB'],
           'ZOES': ['A', 'ACIW', 'CNSL', 'ZOES'],
           'TIVO': ['A', 'ADBE', 'ELLI', 'TIVO'],
           'DFRG': ['A', 'CBS', 'ISCA', 'DFRG'],
           'PZZA': ['A', 'CBS', 'ISCA', 'PZZA'],
           'BH': ['A', 'DIS', 'PBPB', 'BH'],
           'PLKI': ['A', 'DIS', 'PBPB', 'PLKI'],
           'CBRL': ['A', 'ETM', 'RUTH', 'CBRL'],
           'CHUY': ['A', 'ETM', 'RUTH', 'CHUY'],
           'DIN': ['A', 'ETM', 'RUTH', 'DIN'],
           'RRGB': ['A', 'ETM', 'RUTH', 'RRGB'],
           'TAST': ['A', 'ETM', 'RUTH', 'TAST'],
           'JACK': ['A', 'NXST', 'CAKE', 'JACK'],
           'MCD': ['A', 'NXST', 'CAKE', 'MCD']\}
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}90}]:} \PY{n}{average\PYZus{}shortest\PYZus{}path\PYZus{}length} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{average\PYZus{}shortest\PYZus{}path\PYZus{}length}\PY{p}{(}\PY{n}{DiG\PYZus{}1}\PY{p}{)} \PY{c+c1}{\PYZsh{} 1.1990808799776556}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        NetworkXError                             Traceback (most recent call last)

        <ipython-input-90-445ee1dbbd59> in <module>()
    ----> 1 average\_shortest\_path\_length = nx.average\_shortest\_path\_length(DiG\_1) \# 1.1990808799776556
    

        \textasciitilde{}/networkx/networkx/algorithms/shortest\_paths/generic.py in average\_shortest\_path\_length(G, weight)
        320     \# Shortest path length is undefined if the graph is disconnected.
        321     if G.is\_directed() and not nx.is\_weakly\_connected(G):
    --> 322         raise nx.NetworkXError("Graph is not weakly connected.")
        323     if not G.is\_directed() and not nx.is\_connected(G):
        324         raise nx.NetworkXError("Graph is not connected.")


        NetworkXError: Graph is not weakly connected.

    \end{Verbatim}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{k}{def} \PY{n+nf}{getRangeDegreeCountOfIndustries}\PY{p}{(}\PY{n}{degree\PYZus{}view}\PY{p}{,} \PY{n}{theta\PYZus{}low\PYZus{}mid}\PY{p}{,} \PY{n}{theta\PYZus{}mid\PYZus{}high}\PY{p}{)}\PY{p}{:}
            \PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{n}{index}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{df\PYZus{}codes\PYZus{}and\PYZus{}title}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}\PY{p}{,}
                              \PY{n}{columns}\PY{o}{=}\PY{p}{[}
                                  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Entire}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Zero Degree}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Low Degree}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mid Degree}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,}
                                  \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{High Degree}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{,} \PY{n}{data}\PY{o}{=}\PY{l+m+mi}{0}\PY{p}{)}
            \PY{n}{df\PYZus{}perc} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
            \PY{n}{df}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{name} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Amount of degrees}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{df\PYZus{}perc}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{name} \PY{o}{=} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Percentage of degrees}\PY{l+s+s1}{\PYZsq{}}
            \PY{n}{lst\PYZus{}value\PYZus{}counts} \PY{o}{=} \PY{p}{[}\PY{n}{pd}\PY{o}{.}\PY{n}{DataFrame}\PY{p}{(}\PY{p}{)}\PY{p}{]} \PY{o}{*} \PY{l+m+mi}{5}
            \PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
                \PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{degree\PYZus{}view}\PY{p}{]}\PY{p}{,}
                \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
            \PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
                \PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{degree\PYZus{}view} \PY{k}{if} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,}
                \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
            \PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
                \PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{degree\PYZus{}view} \PY{k}{if} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{o+ow}{and} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{n}{theta\PYZus{}low\PYZus{}mid}\PY{p}{]}\PY{p}{,}
                \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
            \PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
                \PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{degree\PYZus{}view} \PY{k}{if} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{theta\PYZus{}low\PYZus{}mid} \PY{o+ow}{and} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{\PYZlt{}} \PY{n}{theta\PYZus{}mid\PYZus{}high}\PY{p}{]}\PY{p}{,}
                \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
            \PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{]} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
                \PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{degree\PYZus{}view} \PY{k}{if} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]} \PY{o}{\PYZgt{}}\PY{o}{=} \PY{n}{theta\PYZus{}mid\PYZus{}high}\PY{p}{]}\PY{p}{,}
                \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                \PY{n}{value\PYZus{}counts} \PY{o}{=} \PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                \PY{k}{for} \PY{n}{key}\PY{p}{,} \PY{n}{value} \PY{o+ow}{in} \PY{n}{value\PYZus{}counts}\PY{o}{.}\PY{n}{iteritems}\PY{p}{(}\PY{p}{)}\PY{p}{:}
                    \PY{n}{df}\PY{o}{.}\PY{n}{ix}\PY{p}{[}\PY{n}{key}\PY{p}{,} \PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{value}
                    \PY{n}{df\PYZus{}perc}\PY{o}{.}\PY{n}{ix}\PY{p}{[}\PY{n}{key}\PY{p}{,} \PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{value}\PY{p}{)} \PY{o}{/} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{lst\PYZus{}value\PYZus{}counts}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
            \PY{k}{return} \PY{n}{df}\PY{p}{,} \PY{n}{df\PYZus{}perc}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{overall\PYZus{}degree\PYZus{}WGD\PYZus{}NR} \PY{o}{=} \PY{n}{WGD\PYZus{}NR}\PY{o}{.}\PY{n}{degree}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{df\PYZus{}range\PYZus{}degree\PYZus{}count\PYZus{}of\PYZus{}industries}\PY{p}{,} \PY{n}{df\PYZus{}perc} \PY{o}{=} \PY{n}{getRangeDegreeCountOfIndustries}\PY{p}{(}\PY{n}{overall\PYZus{}degree\PYZus{}WGD\PYZus{}NR}\PY{p}{,} \PY{l+m+mi}{200}\PY{p}{,} \PY{l+m+mi}{1000}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{df\PYZus{}range\PYZus{}degree\PYZus{}count\PYZus{}of\PYZus{}industries}
\end{Verbatim}


    \hypertarget{community-structure}{%
\subsection{Community Structure}\label{community-structure}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}35}]:} \PY{n}{G} \PY{o}{=} \PY{n}{nx}\PY{o}{.}\PY{n}{barbell\PYZus{}graph}\PY{p}{(}\PY{l+m+mi}{5}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}36}]:} \PY{n}{communities\PYZus{}generator} \PY{o}{=} \PY{n}{community}\PY{o}{.}\PY{n}{girvan\PYZus{}newman}\PY{p}{(}\PY{n}{G}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}37}]:} \PY{n}{top\PYZus{}level\PYZus{}communities} \PY{o}{=} \PY{n+nb}{next}\PY{p}{(}\PY{n}{communities\PYZus{}generator}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}38}]:} \PY{n}{next\PYZus{}level\PYZus{}communities} \PY{o}{=} \PY{n+nb}{next}\PY{p}{(}\PY{n}{communities\PYZus{}generator}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}39}]:} \PY{n+nb}{sorted}\PY{p}{(}\PY{n+nb}{map}\PY{p}{(}\PY{n+nb}{sorted}\PY{p}{,} \PY{n}{next\PYZus{}level\PYZus{}communities}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}39}]:} [[0, 1, 2, 3, 4], [5], [6, 7, 8, 9, 10]]
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}43}]:} \PY{n}{c\PYZus{}p} \PY{o}{=} \PY{n}{community}\PY{o}{.}\PY{n}{kernighan\PYZus{}lin\PYZus{}bisection}\PY{p}{(}\PY{n}{PGD}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]

        ---------------------------------------------------------------------------

        NetworkXNotImplemented                    Traceback (most recent call last)

        <ipython-input-43-8168b42b214a> in <module>()
    ----> 1 c\_p = community.kernighan\_lin\_bisection(PGD)
    

        <decorator-gen-478> in kernighan\_lin\_bisection(G, partition, max\_iter, weight)


        \textasciitilde{}/networkx/networkx/utils/decorators.py in \_not\_implemented\_for(not\_implement\_for\_func, *args, **kwargs)
         69         if match:
         70             msg = 'not implemented for \%s type' \% ' '.join(graph\_types)
    ---> 71             raise nx.NetworkXNotImplemented(msg)
         72         else:
         73             return not\_implement\_for\_func(*args, **kwargs)


        NetworkXNotImplemented: not implemented for directed type

    \end{Verbatim}

    Calculate the \textbf{in- and out-degree ratio}: the number of
in-degrees divided by the number of out-degrees of a node. Apply to both
weighted and unweighted networks.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{k}{def} \PY{n+nf}{CalInOutDegreeRatio}\PY{p}{(}\PY{n}{G}\PY{p}{)}\PY{p}{:}
            \PY{n}{arr\PYZus{}ratio} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{p}{[}\PY{l+m+mf}{0.0}\PY{p}{]} \PY{o}{*} \PY{n+nb}{len}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}\PY{p}{)}
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                \PY{n}{tckr} \PY{o}{=} \PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]}
                \PY{n}{in\PYZus{}degree} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{in\PYZus{}degree}\PY{p}{[}\PY{n}{tckr}\PY{p}{]}
                \PY{n}{out\PYZus{}degree} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{out\PYZus{}degree}\PY{p}{[}\PY{n}{tckr}\PY{p}{]}
                \PY{k}{if} \PY{n}{in\PYZus{}degree} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0} \PY{o+ow}{and} \PY{n}{out\PYZus{}degree} \PY{o}{\PYZgt{}} \PY{l+m+mi}{0}\PY{p}{:}
                    \PY{n}{arr\PYZus{}ratio}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n+nb}{float}\PY{p}{(}\PY{n}{in\PYZus{}degree}\PY{p}{)} \PY{o}{/} \PY{n}{out\PYZus{}degree}
                \PY{k}{elif} \PY{n}{out\PYZus{}degree} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:}
                    \PY{k}{if} \PY{n}{in\PYZus{}degree} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:} \PY{n}{arr\PYZus{}ratio}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}
                    \PY{k}{else}\PY{p}{:} \PY{n}{arr\PYZus{}ratio}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{inf}
            \PY{k}{return} \PY{n}{arr\PYZus{}ratio}
\end{Verbatim}


    Get the descriptive statistics of two kinds of IOD-Ratios, both the mean
and variance values decrease, indicates more in-degrees are eliminated
by the correlation coefficient threshold.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Unwt} \PY{o}{=} \PY{n}{CalInOutDegreeRatio}\PY{p}{(}\PY{n}{DiUnwtG}\PY{p}{)}
        \PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt} \PY{o}{=} \PY{n}{CalInOutDegreeRatio}\PY{p}{(}\PY{n}{DiWtG\PYZus{}NmRt}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{describe}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Unwt}\PY{p}{[}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Unwt}\PY{o}{!=}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Unwt}\PY{o}{!=}\PY{n}{np}\PY{o}{.}\PY{n}{inf}\PY{p}{)}\PY{p}{]}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{describe}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{p}{[}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{o}{!=}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)} \PY{o}{\PYZam{}} \PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{o}{!=}\PY{n}{np}\PY{o}{.}\PY{n}{inf}\PY{p}{)}\PY{p}{]}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    Interestingly, when use directed weighted network to generate the in-
and out-degree ratio, there are many nodes have complete balanced in-
and out-degree, while there are none nodes with ratio of exactly 1 for
directed unweighted network.

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of nodes with in\PYZhy{} and out\PYZhy{}degree ratio of 1 for DCN: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Unwt}\PY{p}{)}\PY{o}{==}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Number of nodes with in\PYZhy{} and out\PYZhy{}degree ratio of 1 for DWCN: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}\PY{o}{==}\PY{l+m+mi}{1}\PY{p}{)}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{k}{def} \PY{n+nf}{getTickersByArrayValue}\PY{p}{(}\PY{n}{arr}\PY{p}{,} \PY{n}{val}\PY{p}{)}\PY{p}{:}
            \PY{k}{return} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{arr}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{n}{arr}\PY{o}{==}\PY{n}{val}\PY{p}{]}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{lst\PYZus{}tckr\PYZus{}IODR\PYZus{}1\PYZus{}Wt} \PY{o}{=} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{o}{==}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}
        \PY{n}{lst\PYZus{}tckr\PYZus{}IODR\PYZus{}b1\PYZus{}Wt} \PY{o}{=} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{o}{\PYZgt{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}
        \PY{n}{lst\PYZus{}tckr\PYZus{}IODR\PYZus{}s1\PYZus{}Wt} \PY{o}{=} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}\PY{p}{)}\PY{p}{[}\PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Wt\PYZus{}NmRt}\PY{o}{\PYZlt{}}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}
        
        \PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}1\PYZus{}Wt\PYZus{}NmRt} \PY{o}{=} \PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
            \PY{n}{stock\PYZus{}code\PYZus{}list}\PY{o}{=}\PY{n}{lst\PYZus{}tckr\PYZus{}IODR\PYZus{}1\PYZus{}Wt}\PY{p}{,}
            \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}b1\PYZus{}Wt\PYZus{}NmRt} \PY{o}{=} \PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
            \PY{n}{stock\PYZus{}code\PYZus{}list}\PY{o}{=}\PY{n}{lst\PYZus{}tckr\PYZus{}IODR\PYZus{}b1\PYZus{}Wt}\PY{p}{,}
            \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}s1\PYZus{}Wt\PYZus{}NmRt} \PY{o}{=} \PY{n}{getIndustryCodeByStockCode}\PY{p}{(}
            \PY{n}{stock\PYZus{}code\PYZus{}list}\PY{o}{=}\PY{n}{lst\PYZus{}tckr\PYZus{}IODR\PYZus{}s1\PYZus{}Wt}\PY{p}{,}
            \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{lst\PYZus{}prev\PYZus{}val\PYZus{}in\PYZus{}Unwt\PYZus{}IODR\PYZus{}1} \PY{o}{=} \PY{n}{arr\PYZus{}in\PYZus{}out\PYZus{}ratio\PYZus{}Unwt}\PY{p}{[}\PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{o}{.}\PY{n}{index}\PY{p}{(}\PY{n}{tckr}\PY{p}{)} \PY{k}{for} \PY{n}{tckr} \PY{o+ow}{in} \PY{n}{lst\PYZus{}tckr\PYZus{}IODR\PYZus{}1\PYZus{}Wt}\PY{p}{]}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{describe}\PY{p}{(}\PY{n}{lst\PYZus{}prev\PYZus{}val\PYZus{}in\PYZus{}Unwt\PYZus{}IODR\PYZus{}1}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{k}{def} \PY{n+nf}{pltIndBarChartByList}\PY{p}{(}\PY{n}{industry\PYZus{}list}\PY{p}{,} \PY{n}{save\PYZus{}file}\PY{o}{=}\PY{k+kc}{False}\PY{p}{,} \PY{n}{filename\PYZus{}postfix}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{0}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{:}
            \PY{n}{uniq\PYZus{}ind} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}1\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}
            \PY{n}{idx} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{uniq\PYZus{}ind}\PY{p}{)}\PY{p}{)}
            \PY{n}{lst\PYZus{}agg} \PY{o}{=} \PY{p}{[}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{industry\PYZus{}list}\PY{p}{)}\PY{o}{==}\PY{n}{ind}\PY{p}{)} \PY{k}{for} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{uniq\PYZus{}ind}\PY{p}{]}
            \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{4}\PY{p}{)}\PY{p}{)}
            \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}agg}\PY{p}{)}
            \PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{uniq\PYZus{}ind}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
            \PY{k}{if} \PY{n}{save\PYZus{}file}\PY{p}{:}
                \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{ROOTPATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/Stock\PYZus{}DWCN/IndBarChart\PYZus{}}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{.pdf}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{filename\PYZus{}postfix}\PY{p}{,} \PY{n}{bbox\PYZus{}inches}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \hypertarget{plot-bar-chart-of-industries-with-the-number-of-nodes-with-iod-ratio-equals-to-1}{%
\paragraph{Plot bar chart of industries with the number of nodes with
IOD-Ratio equals to
1}\label{plot-bar-chart-of-industries-with-the-number-of-nodes-with-iod-ratio-equals-to-1}}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{pltIndBarChartByList}\PY{p}{(}\PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}1\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{pltIndBarChartByList}\PY{p}{(}\PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}b1\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{pltIndBarChartByList}\PY{p}{(}\PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}s1\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{uniq\PYZus{}ind} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{getIndustryCodeByStockCode}\PY{p}{(}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{,} \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}
        \PY{n}{idx} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{uniq\PYZus{}ind}\PY{p}{)}\PY{p}{)}
        \PY{n}{lst\PYZus{}agg\PYZus{}s1} \PY{o}{=} \PY{p}{[}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}s1\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}\PY{o}{==}\PY{n}{ind}\PY{p}{)} \PY{k}{for} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{uniq\PYZus{}ind}\PY{p}{]}
        \PY{n}{lst\PYZus{}agg\PYZus{}1} \PY{o}{=} \PY{p}{[}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}1\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}\PY{o}{==}\PY{n}{ind}\PY{p}{)} \PY{k}{for} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{uniq\PYZus{}ind}\PY{p}{]}
        \PY{n}{lst\PYZus{}agg\PYZus{}b1} \PY{o}{=} \PY{p}{[}\PY{n+nb}{sum}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}IndTtl\PYZus{}IODR\PYZus{}b1\PYZus{}Wt\PYZus{}NmRt}\PY{p}{)}\PY{o}{==}\PY{n}{ind}\PY{p}{)} \PY{k}{for} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{uniq\PYZus{}ind}\PY{p}{]}
        \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{6}\PY{p}{)}\PY{p}{)}
        \PY{n}{p1} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}agg\PYZus{}s1}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{p2} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}agg\PYZus{}1}\PY{p}{,} \PY{n}{bottom}\PY{o}{=}\PY{n}{lst\PYZus{}agg\PYZus{}s1}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{p3} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}agg\PYZus{}b1}\PY{p}{,} 
                     \PY{n}{bottom}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}agg\PYZus{}s1}\PY{p}{)}\PY{o}{+}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}agg\PYZus{}1}\PY{p}{)}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{g}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{uniq\PYZus{}ind}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
        \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{(}\PY{n}{p1}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{p2}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{p3}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Smaller than 1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Equal to 1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Bigger than 1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{;}
        \PY{n}{plt}\PY{o}{.}\PY{n}{savefig}\PY{p}{(}\PY{n}{ROOTPATH} \PY{o}{+} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/Stock\PYZus{}DWCN/IndStackedBarChart\PYZus{}00.pdf}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{bbox\PYZus{}inches}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{tight}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{industry\PYZus{}0} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Fabricated metal products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Legal services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Mining, except oil and gas}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Miscellaneous manufacturing}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Motion picture and sound recording industries}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Other services, except government}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Securities, commodity contracts, and investments}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Truck transportation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Utilities}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Water transportation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{n}{industry\PYZus{}1} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Administrative and support services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Ambulatory health care services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Ambulatory health care services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Broadcasting and telecommunications}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Chemical products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Computer and electronic products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Computer systems design and related services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Construction}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Federal Reserve banks, credit intermediation, and related activities}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Food and beverage and tobacco products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Hospitals}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Insurance carriers and related activities}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Machinery}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Miscellaneous professional, scientific, and technical services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Motor vehicles, bodies and trailers, and parts}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Other real estate}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Other retail}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rental and leasing services and lessors of intangible assets}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Wholesale trade}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
        \PY{n}{industry\PYZus{}2} \PY{o}{=} \PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Accommodation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Air transportation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Apparel and leather and allied products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Data processing, internet publishing, and other information services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Electrical equipment, appliances, and components}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Funds, trusts, and other financial vehicles}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Furniture and related products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Nonmetallic mineral products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Oil and gas extraction}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Other transportation and support activities}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Other transportation equipment}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Paper products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Performing arts, spectator sports, museums, and related activities}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Petroleum and coal products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Pipeline transportation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Plastics and rubber products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Primary metals}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Printing and related support activities}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Publishing industries, except internet (includes software)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Rail transportation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Social assistance}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Support activities for mining}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Textile mills and textile product mills}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Transit and ground passenger transportation}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Waste management and remediation services}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Wood products}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n+nb}{print}\PY{p}{(}\PY{n}{industry\PYZus{}0}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{industry\PYZus{}1}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{industry\PYZus{}2}\PY{p}{)}
\end{Verbatim}


    \begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  construct the modularity matrix according to the equation:
  \(B_{ij}=A_{ij}-\frac{k_i^{in}k_j^{out}}{m}\), \(A_{ij}\) is defined
  in the conventional manner to be 1 if there is an edge from j to i and
  zero otherwise, \(m\) is the total number of edges in the network;
\item
  find the most positive eigenvalue of the symmetric matrix \(B+B^T\)
  and the corresponding eigenvector;
\item
  each vertex is assigned to one of two groups depending on the sign of
  the appropriate element of the eigenvector, and then fine-tune the
  assignments as described above to maximize the modularity;
\item
  further subdivide the communities using the same method, but with the
  generalized modularity matrix, \(B_{ij}^{(g)}\), fine-tuning after
  each division.
\end{enumerate}

    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{k}{def} \PY{n+nf}{detectCommunityForDirectedGraph}\PY{p}{(}\PY{n}{G}\PY{p}{)}\PY{p}{:}
            \PY{n}{lst\PYZus{}node} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{G}\PY{o}{.}\PY{n}{nodes}\PY{p}{)}
            \PY{n}{NONODES} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}nodes}\PY{p}{(}\PY{p}{)}
            \PY{n}{NOEDGES} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{number\PYZus{}of\PYZus{}edges}\PY{p}{(}\PY{p}{)}
            \PY{n}{NOINDEGREES} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{in\PYZus{}degree}\PY{p}{(}\PY{p}{)}
            \PY{n}{NOOUTDEGREES} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{out\PYZus{}degree}\PY{p}{(}\PY{p}{)}
            \PY{n}{overall\PYZus{}asgn} \PY{o}{=} \PY{p}{[}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{,} \PY{l+m+mi}{0}\PY{p}{)}\PY{p}{]} \PY{o}{*} \PY{n}{NONODES}
            
            \PY{k}{def} \PY{n+nf}{getNodeSpace}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{,} \PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{n}{val}\PY{p}{)}\PY{p}{:}
                \PY{k}{return} \PY{p}{[}\PY{n}{node\PYZus{}space}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{upd\PYZus{}asgn}\PY{p}{)}\PY{p}{)} \PY{k}{if} \PY{n}{upd\PYZus{}asgn}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{==} \PY{n}{val}\PY{p}{]}
            
            \PY{k}{def} \PY{n+nf}{fineTune}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{,} \PY{n}{upd\PYZus{}asgn}\PY{p}{)}\PY{p}{:}
                \PY{k}{nonlocal} \PY{n}{G}
                \PY{k}{nonlocal} \PY{n}{overall\PYZus{}asgn}
                \PY{k}{nonlocal} \PY{n}{NONODES}
                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{upd\PYZus{}asgn}\PY{p}{:}
                    \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n}{node\PYZus{}space}\PY{p}{:}
                    
            \PY{k}{def} \PY{n+nf}{interateBisection}\PY{p}{(}\PY{n}{mod\PYZus{}mat}\PY{p}{,} \PY{n}{node\PYZus{}space}\PY{p}{,} \PY{n}{generation\PYZus{}mark}\PY{p}{)}\PY{p}{:}
                \PY{k}{nonlocal} \PY{n}{G}
                \PY{k}{nonlocal} \PY{n}{overall\PYZus{}asgn}
                \PY{n}{upd\PYZus{}asgn} \PY{o}{=} \PY{n}{subdivideCommunities}\PY{p}{(}\PY{n}{mod\PYZus{}mat}\PY{p}{)}
                \PY{c+c1}{\PYZsh{} todo: fine\PYZhy{}tune}
                
                \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{unique}\PY{p}{(}\PY{n}{upd\PYZus{}asgn}\PY{p}{)}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{:} \PY{k}{return}
                \PY{n}{delta\PYZus{}Q} \PY{o}{=} \PY{n}{calDeltaQ}\PY{p}{(}\PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{n}{mod\PYZus{}mat}\PY{p}{)}
                \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{calDeltaQ: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{n}{delta\PYZus{}Q}\PY{p}{)}
                \PY{k}{if} \PY{n}{delta\PYZus{}Q} \PY{o}{\PYZlt{}} \PY{l+m+mi}{0}\PY{p}{:} \PY{k}{return}
                \PY{n}{node\PYZus{}space\PYZus{}1} \PY{o}{=} \PY{n}{getNodeSpace}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{,} \PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{)}
                \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{node\PYZus{}space\PYZus{}1}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:} \PY{k}{return}
                \PY{n}{updCommunityAssignment}\PY{p}{(}\PY{n}{node\PYZus{}space\PYZus{}1}\PY{p}{,} \PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{n}{generation\PYZus{}mark}\PY{p}{)}
                \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{genGeneralisedModularityMatrix\PYZus{}1: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{:}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{:}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{time}\PY{o}{.}\PY{n}{localtime}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{,}\PY{n}{time}\PY{o}{.}\PY{n}{localtime}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{]}\PY{p}{,}\PY{n}{time}\PY{o}{.}\PY{n}{localtime}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{5}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                \PY{n}{mod\PYZus{}mat\PYZus{}1} \PY{o}{=} \PY{n}{genGeneralisedModularityMatrix}\PY{p}{(}\PY{n}{node\PYZus{}space\PYZus{}1}\PY{p}{)}
                \PY{n}{interateBisection}\PY{p}{(}\PY{n}{mod\PYZus{}mat\PYZus{}1}\PY{p}{,} \PY{n}{node\PYZus{}space\PYZus{}1}\PY{p}{,} \PY{n}{generation\PYZus{}mark}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}
                \PY{n}{node\PYZus{}space\PYZus{}2} \PY{o}{=} \PY{n}{getNodeSpace}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{,} \PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}
                \PY{k}{if} \PY{n+nb}{len}\PY{p}{(}\PY{n}{node\PYZus{}space\PYZus{}2}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:} \PY{k}{return}
                \PY{n}{updCommunityAssignment}\PY{p}{(}\PY{n}{node\PYZus{}space\PYZus{}2}\PY{p}{,} \PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{n}{generation\PYZus{}mark}\PY{p}{)}
                \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{genGeneralisedModularityMatrix\PYZus{}2: }\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{:}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{:}\PY{l+s+si}{\PYZpc{}s}\PY{l+s+s1}{\PYZsq{}} \PY{o}{\PYZpc{}} \PY{p}{(}\PY{n}{time}\PY{o}{.}\PY{n}{localtime}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{,}\PY{n}{time}\PY{o}{.}\PY{n}{localtime}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{4}\PY{p}{]}\PY{p}{,}\PY{n}{time}\PY{o}{.}\PY{n}{localtime}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{5}\PY{p}{]}\PY{p}{)}\PY{p}{)}
                \PY{n}{mod\PYZus{}mat\PYZus{}2} \PY{o}{=} \PY{n}{genGeneralisedModularityMatrix}\PY{p}{(}\PY{n}{node\PYZus{}space\PYZus{}2}\PY{p}{)}
                \PY{n}{interateBisection}\PY{p}{(}\PY{n}{mod\PYZus{}mat\PYZus{}2}\PY{p}{,} \PY{n}{node\PYZus{}space\PYZus{}2}\PY{p}{,} \PY{n}{generation\PYZus{}mark}\PY{o}{+}\PY{l+m+mi}{1}\PY{p}{)}
                \PY{k}{return}
            
            \PY{k}{def} \PY{n+nf}{genGeneralisedModularityMatrix}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{)}\PY{p}{:}\PY{c+c1}{\PYZsh{} Subgraph}
                \PY{k}{nonlocal} \PY{n}{G}
                \PY{k}{nonlocal} \PY{n}{lst\PYZus{}node}
                \PY{k}{nonlocal} \PY{n}{NOEDGES}
                \PY{k}{nonlocal} \PY{n}{NOINDEGREES}
                \PY{k}{nonlocal} \PY{n}{NOOUTDEGREES}
                \PY{k}{nonlocal} \PY{n}{overall\PYZus{}asgn}
                \PY{n}{LENNODESPECE} \PY{o}{=} \PY{n+nb}{len}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{)}
                \PY{n}{mod\PYZus{}mat} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{matrix}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{p}{(}\PY{n}{LENNODESPECE}\PY{p}{,} \PY{n}{LENNODESPECE}\PY{p}{)}\PY{p}{,} \PY{n}{dtype}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{float64}\PY{p}{)}\PY{p}{)}
                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{LENNODESPECE}\PY{p}{)}\PY{p}{:}
                    \PY{n+nb}{print}\PY{p}{(}\PY{n}{i}\PY{p}{,} \PY{n}{end}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{ }\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                    \PY{n}{tckr\PYZus{}i} \PY{o}{=} \PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{node\PYZus{}space}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]}
                    \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{LENNODESPECE}\PY{p}{)}\PY{p}{:}
                        \PY{n}{tckr\PYZus{}j} \PY{o}{=} \PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{node\PYZus{}space}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{]}
                        \PY{n}{Bij} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{tckr\PYZus{}j}\PY{p}{,} \PY{n}{tckr\PYZus{}i}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{NOINDEGREES}\PY{p}{[}\PY{n}{tckr\PYZus{}i}\PY{p}{]} \PY{o}{*} \PY{n}{NOOUTDEGREES}\PY{p}{[}\PY{n}{tckr\PYZus{}j}\PY{p}{]} \PY{o}{/} \PY{n}{NOEDGES}
                        \PY{k}{if} \PY{n}{overall\PYZus{}asgn}\PY{p}{[}\PY{n}{node\PYZus{}space}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]} \PY{o}{==} \PY{n}{overall\PYZus{}asgn}\PY{p}{[}\PY{n}{node\PYZus{}space}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{]}\PY{p}{:}
                            \PY{n}{Ck} \PY{o}{=} \PY{l+m+mf}{0.0}
                            \PY{k}{for} \PY{n}{k} \PY{o+ow}{in} \PY{n}{node\PYZus{}space}\PY{p}{:}
                                \PY{n}{tckr\PYZus{}k} \PY{o}{=} \PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{k}\PY{p}{]}
                                \PY{n}{Ck} \PY{o}{+}\PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{tckr\PYZus{}k}\PY{p}{,} \PY{n}{tckr\PYZus{}i}\PY{p}{)} \PY{o}{+} \PY{n}{G}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{tckr\PYZus{}i}\PY{p}{,} \PY{n}{tckr\PYZus{}k}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{p}{(}\PY{n}{NOINDEGREES}\PY{p}{[}\PY{n}{tckr\PYZus{}i}\PY{p}{]} \PY{o}{*} \PY{n}{NOOUTDEGREES}\PY{p}{[}\PY{n}{tckr\PYZus{}k}\PY{p}{]} \PY{o}{+} \PY{n}{NOINDEGREES}\PY{p}{[}\PY{n}{tckr\PYZus{}k}\PY{p}{]} \PY{o}{*} \PY{n}{NOOUTDEGREES}\PY{p}{[}\PY{n}{tckr\PYZus{}i}\PY{p}{]}\PY{p}{)} \PY{o}{/} \PY{n}{NOEDGES}
                            \PY{n}{mod\PYZus{}mat}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n}{Bij} \PY{o}{\PYZhy{}} \PY{n}{Ck} \PY{o}{/} \PY{l+m+mf}{2.0}
                        \PY{k}{else}\PY{p}{:} \PY{n}{mod\PYZus{}mat}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n}{Bij}
                \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{/}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
                \PY{k}{return} \PY{n}{mod\PYZus{}mat}
            
            \PY{k}{def} \PY{n+nf}{updCommunityAssignment}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{,} \PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{n}{generation\PYZus{}mark}\PY{p}{)}\PY{p}{:}
                \PY{k}{nonlocal} \PY{n}{overall\PYZus{}asgn}
                \PY{k}{global} \PY{n}{asgn\PYZus{}history}
                \PY{n}{inreval\PYZus{}1} \PY{o}{=} \PY{l+m+mi}{0}
                \PY{n}{inreval\PYZus{}2} \PY{o}{=} \PY{l+m+mi}{0}
                \PY{n}{lst\PYZus{}gener\PYZus{}asgn} \PY{o}{=} \PY{p}{[}\PY{p}{]}
                \PY{k}{for} \PY{n}{asgn} \PY{o+ow}{in} \PY{n}{overall\PYZus{}asgn}\PY{p}{:}
                    \PY{k}{if} \PY{n}{asgn}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{o}{==} \PY{n}{generation\PYZus{}mark}\PY{p}{:}
                        \PY{n}{lst\PYZus{}gener\PYZus{}asgn}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{asgn}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                    \PY{k}{if} \PY{n}{i} \PY{o+ow}{not} \PY{o+ow}{in} \PY{n}{lst\PYZus{}gener\PYZus{}asgn}\PY{p}{:}
                        \PY{n}{inreval\PYZus{}1} \PY{o}{=} \PY{n}{i}
                        \PY{k}{break}
                \PY{k}{if} \PY{n}{upd\PYZus{}asgn}\PY{o}{.}\PY{n}{count}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{)} \PY{o}{==} \PY{l+m+mi}{0}\PY{p}{:} \PY{n}{inreval\PYZus{}2} \PY{o}{=} \PY{n}{inreval\PYZus{}1}
                \PY{k}{else}\PY{p}{:}
                    \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                        \PY{k}{if} \PY{n}{i} \PY{o+ow}{not} \PY{o+ow}{in} \PY{n}{lst\PYZus{}gener\PYZus{}asgn}\PY{p}{:}
                            \PY{n}{inreval\PYZus{}2} \PY{o}{=} \PY{n}{i}
                            \PY{k}{break}
                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{node\PYZus{}space}\PY{p}{)}\PY{p}{)}\PY{p}{:}
                    \PY{k}{if} \PY{n}{upd\PYZus{}asgn}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{==} \PY{l+m+mi}{1}\PY{p}{:} \PY{n}{overall\PYZus{}asgn}\PY{p}{[}\PY{n}{node\PYZus{}space}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{generation\PYZus{}mark}\PY{p}{,} \PY{n}{inreval\PYZus{}1}\PY{p}{)}
                    \PY{k}{if} \PY{n}{upd\PYZus{}asgn}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{==} \PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{:} \PY{n}{overall\PYZus{}asgn}\PY{p}{[}\PY{n}{node\PYZus{}space}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]} \PY{o}{=} \PY{p}{(}\PY{n}{generation\PYZus{}mark}\PY{p}{,} \PY{n}{inreval\PYZus{}2}\PY{p}{)}
                \PY{c+c1}{\PYZsh{}print(overall\PYZus{}asgn)}
                \PY{n}{asgn\PYZus{}history}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{overall\PYZus{}asgn}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}\PY{p}{)}
            
            \PY{k}{def} \PY{n+nf}{subdivideCommunities}\PY{p}{(}\PY{n}{mod\PYZus{}mat}\PY{p}{)}\PY{p}{:}
                \PY{n}{sym\PYZus{}mat} \PY{o}{=} \PY{n}{mod\PYZus{}mat} \PY{o}{+} \PY{n}{mod\PYZus{}mat}\PY{o}{.}\PY{n}{T}
                \PY{n}{w}\PY{p}{,} \PY{n}{v} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{linalg}\PY{o}{.}\PY{n}{eigh}\PY{p}{(}\PY{n}{sym\PYZus{}mat}\PY{p}{)}
                \PY{n}{eigv} \PY{o}{=} \PY{n}{v}\PY{p}{[}\PY{p}{:}\PY{p}{,} \PY{n+nb}{len}\PY{p}{(}\PY{n}{w}\PY{p}{)}\PY{o}{\PYZhy{}}\PY{l+m+mi}{1}\PY{p}{]}
                \PY{k}{return} \PY{p}{[}\PY{n}{np}\PY{o}{.}\PY{n}{sign}\PY{p}{(}\PY{n}{v}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)} \PY{k}{for} \PY{n}{v} \PY{o+ow}{in} \PY{n}{eigv}\PY{p}{]}
                
            \PY{k}{def} \PY{n+nf}{calDirectedGraphModularity}\PY{p}{(}\PY{n}{assignment}\PY{p}{)}\PY{p}{:}
                \PY{k}{nonlocal} \PY{n}{G}
                \PY{k}{nonlocal} \PY{n}{lst\PYZus{}node}
                \PY{k}{nonlocal} \PY{n}{NONODES}
                \PY{k}{nonlocal} \PY{n}{NOEDGES}
                \PY{k}{nonlocal} \PY{n}{NOINDEGREES}
                \PY{k}{nonlocal} \PY{n}{NOOUTDEGREES}
                \PY{n}{Q} \PY{o}{=} \PY{l+m+mf}{0.0}
                \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{NONODES}\PY{p}{)}\PY{p}{:}
                    \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{NONODES}\PY{p}{)}\PY{p}{:}
                        \PY{k}{if} \PY{n}{assignment}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{o}{==} \PY{n}{assignment}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{:}
                            \PY{n}{Q} \PY{o}{+}\PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{,} \PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{NOINDEGREES}\PY{p}{[}\PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]} \PY{o}{*} \PY{n}{NOOUTDEGREES}\PY{p}{[}\PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{]} \PY{o}{/} \PY{n}{NOEDGES}
                \PY{k}{return} \PY{n}{Q} \PY{o}{/} \PY{n}{NOEDGES}
            
            \PY{k}{def} \PY{n+nf}{calDeltaQ}\PY{p}{(}\PY{n}{upd\PYZus{}asgn}\PY{p}{,} \PY{n}{Bg}\PY{p}{)}\PY{p}{:}
                \PY{k}{nonlocal} \PY{n}{NOEDGES}
                \PY{n}{sg} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{matrix}\PY{p}{(}\PY{n}{upd\PYZus{}asgn}\PY{p}{)}
                \PY{k}{return} \PY{l+m+mf}{0.25}\PY{o}{/}\PY{n}{NOEDGES}\PY{o}{*}\PY{n}{np}\PY{o}{.}\PY{n}{dot}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{dot}\PY{p}{(}\PY{n}{sg}\PY{p}{,} \PY{p}{(}\PY{n}{Bg}\PY{o}{+}\PY{n}{Bg}\PY{o}{.}\PY{n}{T}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{n}{sg}\PY{o}{.}\PY{n}{T}\PY{p}{)}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{,}\PY{l+m+mi}{0}\PY{p}{]}
            
            \PY{n}{MODMAT} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{matrix}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{zeros}\PY{p}{(}\PY{p}{(}\PY{n}{NONODES}\PY{p}{,} \PY{n}{NONODES}\PY{p}{)}\PY{p}{,} \PY{n}{dtype}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{float64}\PY{p}{)}\PY{p}{)}
            \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{NONODES}\PY{p}{)}\PY{p}{:}
                \PY{k}{for} \PY{n}{j} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n}{NONODES}\PY{p}{)}\PY{p}{:}
                    \PY{n}{MODMAT}\PY{p}{[}\PY{n}{i}\PY{p}{,} \PY{n}{j}\PY{p}{]} \PY{o}{=} \PY{n}{G}\PY{o}{.}\PY{n}{has\PYZus{}edge}\PY{p}{(}\PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{,} \PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{NOINDEGREES}\PY{p}{[}\PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{]} \PY{o}{*} \PY{n}{NOOUTDEGREES}\PY{p}{[}\PY{n}{lst\PYZus{}node}\PY{p}{[}\PY{n}{j}\PY{p}{]}\PY{p}{]} \PY{o}{/} \PY{n}{NOEDGES}
            \PY{n}{interateBisection}\PY{p}{(}\PY{n}{MODMAT}\PY{p}{,} \PY{n+nb}{list}\PY{p}{(}\PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n}{NONODES}\PY{p}{)}\PY{p}{)}\PY{p}{,} \PY{l+m+mi}{1}\PY{p}{)}
            \PY{k}{return} \PY{n}{overall\PYZus{}asgn}\PY{p}{,} \PY{n}{calDirectedGraphModularity}\PY{p}{(}\PY{n}{overall\PYZus{}asgn}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{lst\PYZus{}tckr\PYZus{}nonzero} \PY{o}{=} \PY{p}{[}\PY{n}{i}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{DiWtG\PYZus{}NmRt}\PY{o}{.}\PY{n}{degree} \PY{k}{if} \PY{n}{i}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{\PYZgt{}}\PY{l+m+mi}{0}\PY{p}{]}
        \PY{n}{rdmchosen\PYZus{}tickers} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{random}\PY{o}{.}\PY{n}{choice}\PY{p}{(}\PY{n}{lst\PYZus{}tckr\PYZus{}nonzero}\PY{p}{,} \PY{l+m+mi}{200}\PY{p}{,} \PY{n}{replace}\PY{o}{=}\PY{k+kc}{False}\PY{p}{)}
        \PY{n}{nonzerodeg\PYZus{}subG} \PY{o}{=} \PY{n}{DiWtG\PYZus{}NmRt}\PY{o}{.}\PY{n}{subgraph}\PY{p}{(}\PY{n}{lst\PYZus{}tckr\PYZus{}nonzero}\PY{p}{)}\PY{o}{.}\PY{n}{copy}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{asgn\PYZus{}history} \PY{o}{=} \PY{p}{[}\PY{p}{]}
        \PY{n}{overall\PYZus{}asgn}\PY{p}{,} \PY{n}{modularity} \PY{o}{=} \PY{n}{detectCommunityForDirectedGraph}\PY{p}{(}\PY{n}{nonzerodeg\PYZus{}subG}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{modularity}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor} }]:} \PY{n}{overall\PYZus{}asgn}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}888}]:} \PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{overall\PYZus{}asgn}\PY{p}{)}
          \PY{n}{v\PYZus{}c} \PY{o}{=} \PY{n}{sri\PYZus{}overall\PYZus{}asgn}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}928}]:} \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index} \PY{o}{=} \PY{n}{sri\PYZus{}overall\PYZus{}asgn}\PY{p}{[}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
          \PY{n}{stp\PYZus{}group\PYZus{}tckr} \PY{o}{=} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index}\PY{p}{]}
          \PY{n}{stp\PYZus{}group\PYZus{}indcode} \PY{o}{=} \PY{n}{getIndustryCodeByStockCode}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}tckr}\PY{p}{,} \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{sri\PYZus{}community\PYZus{}1} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}indcode}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
          \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index} \PY{o}{=} \PY{n}{sri\PYZus{}overall\PYZus{}asgn}\PY{p}{[}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
          \PY{n}{stp\PYZus{}group\PYZus{}tckr} \PY{o}{=} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index}\PY{p}{]}
          \PY{n}{stp\PYZus{}group\PYZus{}indcode} \PY{o}{=} \PY{n}{getIndustryCodeByStockCode}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}tckr}\PY{p}{,} \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{sri\PYZus{}community\PYZus{}2} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}indcode}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
          \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index} \PY{o}{=} \PY{n}{sri\PYZus{}overall\PYZus{}asgn}\PY{p}{[}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
          \PY{n}{stp\PYZus{}group\PYZus{}tckr} \PY{o}{=} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index}\PY{p}{]}
          \PY{n}{stp\PYZus{}group\PYZus{}indcode} \PY{o}{=} \PY{n}{getIndustryCodeByStockCode}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}tckr}\PY{p}{,} \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{sri\PYZus{}community\PYZus{}3} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}indcode}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
          \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index} \PY{o}{=} \PY{n}{sri\PYZus{}overall\PYZus{}asgn}\PY{p}{[}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{]}\PY{o}{.}\PY{n}{index}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
          \PY{n}{stp\PYZus{}group\PYZus{}tckr} \PY{o}{=} \PY{p}{[}\PY{n}{lst\PYZus{}tickers\PYZus{}stp}\PY{p}{[}\PY{n}{i}\PY{p}{]} \PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n}{stp\PYZus{}group\PYZus{}tckr\PYZus{}index}\PY{p}{]}
          \PY{n}{stp\PYZus{}group\PYZus{}indcode} \PY{o}{=} \PY{n}{getIndustryCodeByStockCode}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}tckr}\PY{p}{,} \PY{n}{code\PYZus{}type}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Title}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{sri\PYZus{}community\PYZus{}4} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{Series}\PY{p}{(}\PY{n}{stp\PYZus{}group\PYZus{}indcode}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}936}]:} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}936}]:} 323
\end{Verbatim}
            
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}938}]:} \PY{n}{lst\PYZus{}community\PYZus{}1} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{lst\PYZus{}community\PYZus{}2} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{lst\PYZus{}community\PYZus{}3} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{n}{lst\PYZus{}community\PYZus{}4} \PY{o}{=} \PY{p}{[}\PY{p}{]}
          \PY{k}{for} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{uniq\PYZus{}ind}\PY{p}{:}
              \PY{k}{if} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{sri\PYZus{}community\PYZus{}1}\PY{o}{.}\PY{n}{index}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}1}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{sri\PYZus{}community\PYZus{}1}\PY{p}{[}\PY{n}{ind}\PY{p}{]} \PY{o}{/} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{)}
              \PY{k}{else}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}1}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}
              \PY{k}{if} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{sri\PYZus{}community\PYZus{}2}\PY{o}{.}\PY{n}{index}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}2}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{sri\PYZus{}community\PYZus{}2}\PY{p}{[}\PY{n}{ind}\PY{p}{]} \PY{o}{/} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}\PY{p}{)}
              \PY{k}{else}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}2}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}
              \PY{k}{if} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{sri\PYZus{}community\PYZus{}3}\PY{o}{.}\PY{n}{index}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}3}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{sri\PYZus{}community\PYZus{}3}\PY{p}{[}\PY{n}{ind}\PY{p}{]} \PY{o}{/} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{)}\PY{p}{)}
              \PY{k}{else}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}3}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}
              \PY{k}{if} \PY{n}{ind} \PY{o+ow}{in} \PY{n}{sri\PYZus{}community\PYZus{}4}\PY{o}{.}\PY{n}{index}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}4}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{n}{sri\PYZus{}community\PYZus{}4}\PY{p}{[}\PY{n}{ind}\PY{p}{]} \PY{o}{/} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{sri\PYZus{}overall\PYZus{}asgn} \PY{o}{==} \PY{n}{v\PYZus{}c}\PY{o}{.}\PY{n}{index}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{)}\PY{p}{)}
              \PY{k}{else}\PY{p}{:} \PY{n}{lst\PYZus{}community\PYZus{}4}\PY{o}{.}\PY{n}{append}\PY{p}{(}\PY{l+m+mi}{0}\PY{p}{)}
\end{Verbatim}


    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}939}]:} \PY{n}{idx} \PY{o}{=} \PY{n}{np}\PY{o}{.}\PY{n}{arange}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{uniq\PYZus{}ind}\PY{p}{)}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{15}\PY{p}{,}\PY{l+m+mi}{6}\PY{p}{)}\PY{p}{)}
          \PY{n}{p1} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}community\PYZus{}1}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{r}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{p2} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}community\PYZus{}2}\PY{p}{,} \PY{n}{bottom}\PY{o}{=}\PY{n}{lst\PYZus{}community\PYZus{}1}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{b}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{p3} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}community\PYZus{}3}\PY{p}{,} 
                       \PY{n}{bottom}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}community\PYZus{}1}\PY{p}{)}\PY{o}{+}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}community\PYZus{}2}\PY{p}{)}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{g}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{p4} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{lst\PYZus{}community\PYZus{}4}\PY{p}{,} 
                       \PY{n}{bottom}\PY{o}{=}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}community\PYZus{}1}\PY{p}{)}\PY{o}{+}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}community\PYZus{}2}\PY{p}{)}\PY{o}{+}\PY{n}{np}\PY{o}{.}\PY{n}{array}\PY{p}{(}\PY{n}{lst\PYZus{}community\PYZus{}3}\PY{p}{)}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{y}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{xticks}\PY{p}{(}\PY{n}{idx}\PY{p}{,} \PY{n}{uniq\PYZus{}ind}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
          \PY{n}{plt}\PY{o}{.}\PY{n}{legend}\PY{p}{(}\PY{p}{(}\PY{n}{p1}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{p2}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{p3}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{p4}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{)}\PY{p}{,} \PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Community 1}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Community 2}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Community 3}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Community 4}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}\PY{p}{)}\PY{p}{;}
          \PY{c+c1}{\PYZsh{}plt.savefig(ROOTPATH + \PYZsq{}/Stock\PYZus{}DWCN/IndStackedBarChart\PYZus{}00.pdf\PYZsq{}, bbox\PYZus{}inches=\PYZsq{}tight\PYZsq{})}
\end{Verbatim}


    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_108_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
{\color{incolor}In [{\color{incolor}837}]:} 
\end{Verbatim}


\begin{Verbatim}[commandchars=\\\{\}]
{\color{outcolor}Out[{\color{outcolor}837}]:} True
\end{Verbatim}
            

    % Add a bibliography block to the postdoc
    
    
    
    \end{document}
